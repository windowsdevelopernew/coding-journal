<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Measuring and recording the room temperature with a Raspberry Pi &middot; Coding Journal</title>

    <meta name="description" content="">

    <meta name="generator" content="Hugo 0.15" />
    <meta name="twitter:card" content="summary">
    
    <meta name="twitter:title" content="Measuring and recording the room temperature with a Raspberry Pi &middot; Coding Journal">
    <meta name="twitter:description" content="">

    <meta property="og:type" content="article">
    <meta property="og:title" content="Measuring and recording the room temperature with a Raspberry Pi &middot; Coding Journal">
    <meta property="og:description" content="">

    <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700|Oxygen:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/pure-min.css">
    <!--[if lte IE 8]>
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-old-ie-min.css">
    <![endif]-->
    <!--[if gt IE 8]><!-->
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-min.css">
    <!--<![endif]-->

    <link rel="stylesheet" href="http://blog.kulman.sk/css/all.min.css">    
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="http://blog.kulman.sk/css/custom.css">

    <link rel="alternate" type="application/rss+xml" title="Coding Journal" href="http://blog.kulman.sk/index.xml" />
</head>
<body>


<div id="layout" class="pure-g">
    <div class="sidebar pure-u-1 pure-u-md-1-4">
    <div class="header">
        <hgroup>
            <h1 class="brand-title"><a href="http://blog.kulman.sk">Coding Journal</a></h1>
            <h2 class="brand-tagline"> Adventures in the world of C#, F# and WinRT </h2>
        </hgroup>

        <nav class="nav wide-only">
            <ul class="nav-list">
                
                <li class="nav-item">
                    <a class="pure-button" href="https://twitter.com/igorkulman"><i class="fa fa-twitter"></i> Twitter</a>
                </li>
                
                
                <li class="nav-item">
                    <a class="pure-button" href="https://github.com/igorkulman "><i class="fa fa-github-alt"></i> github</a>
                </li>
                
                <li class="nav-item">
                    <a class="pure-button" href="http://blog.kulman.sk/index.xml"><i class="fa fa-rss"></i> rss</a>
                </li>
            </ul>
        </nav>

<div class="wide-only">
<h2>About me</h2>

<p>Igor Kulman is currently working as Windows Phone developer, also building applications for Microsoft Azure and playing with F#.</p>
<p>
Interested in programming languages, functional programming and data science.</p>

</div>

    </div>
</div>


    <div class="content pure-u-1 pure-u-md-3-4">
        <div>
            
            <div class="posts">
                <h1 class="content-subhead">30 Mar 2015</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://blog.kulman.sk/measuring-and-recording-the-room-temperature-with-a-raspberry-pi/" class="post-title">Measuring and recording the room temperature with a Raspberry Pi</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">Igor Kulman</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-Raspberry Pi" href="http://blog.kulman.sk/categories/raspberry-pi">Raspberry Pi</a>
                            
                        </p>
                    </header>

                  
                    <div class="post-description">
                        <p>The Raspberry Pi is a small embedded computing device that you can use for <a href="http://blog.kulman.sk/my-year-with-the-raspberry-pi-and-what-i-used-it-for/" title="My year with the Raspberry Pi and what I used it for">many different software and hardware projects</a>. One of the first projects I did with the Pi was turning it into a device that would measure, record and display the room temperature.</p>

<p><strong>Hadrware</strong></p>

<p>To make the project, you will of course need a Raspberry Pi. I use my old Raspberry Pi model B, any newer one would also work. You also need a DS18B20 temperature sensor and a RRU 4K7 resistor. You can buy the separately, or you can buy the <a href="https://www.modmypi.com/raspberry-pi/set-up-kits/project-kits/raspberry-pi-youtube-workshop-kit">Raspberry Pi YouTube Workshop Kit</a> that also contains both parts.</p>

<p>To connect the temperature sensor to the Pi, I suggest you follow the <a href="https://www.youtube.com/watch?v=S2v1VNgHnvI">YouTube tutorial for the kit</a>. You can also solder the temperature sensor and the resistor into one piece and connect it to the Pi using <a href="http://www.astromik.org/raspi/sch-2tep.gif">this schema</a>, so the result then looks like this</p>

<img src="/images/pitherm.jpg" alt="" class="pure-img" >

<p><strong>Drivers</strong></p>

<p>The advantage of using the DS18B20 temperature sensor is that Raspbian and all the other Raspbian based Linux distors for the Pi contain drivers for it. There are two drivers that you need to load to make it work, the w1-gpio and the w1-therm. You can load them using</p>

<script src="https://gist.github.com/igorkulman/824c700681a8b6497ca8.js?file=drivers.sh"></script>

<p>or just add them to /etc/modules so they autoload with each boot of the Pi.</p>

<p>When the temperature sensor is connected and both drivers are loaded, a new device will appear in /sys/bus/w1/devices/. On my Pi, it is 28-000004e23e98, execute</p>

<script src="https://gist.github.com/igorkulman/824c700681a8b6497ca8.js?file=id.sh"></script>

<p>to find the id on yours.</p>

<p><strong>Software</strong></p>

<p>I am a .NET developer but running Mono on the Pi just seems strange to me, so I decided to use Node.js to create the UI. You can find the <a href="https://github.com/igorkulman/rpi-thermometer">whole project on Github</a>. It is a simple Node.js server that gets the temperature and shows it.</p>

<img src="/images/pi-ui.png" alt="" class="pure-img" >

<p>Getting the temperature is a matter of a simple cat command to the right place</p>

<script src="https://gist.github.com/igorkulman/824c700681a8b6497ca8.js?file=cat.sh"></script>

<p>and parsing the result.</p>

<p>I decided to use SQLite for storing the data and create a simple endpoint that gets the current temperature and stores it in the database. I recommend using cron to call the endpoint with the periodicity you want.</p>

<p>You can then use the /history endpoint to get the temperature stats.</p>

<img src="/images/pi-history.png" alt="" class="pure-img" >

<p>You can get, download, fork the whole project from <a href="https://github.com/igorkulman/rpi-thermometer">https://github.com/igorkulman/rpi-thermometer</a>.</p>

<p>[8]: <a href="https://camo.githubusercontent.com/e34f5c0247b592e874f2864e75e184570b181993/68747470733a2f2f646c2e64726f70626f7875736572636f6e74656e742e636f6d2f752f37333634322f61727469636c65732f72706974656d702e706e67">https://camo.githubusercontent.com/e34f5c0247b592e874f2864e75e184570b181993/68747470733a2f2f646c2e64726f70626f7875736572636f6e74656e742e636f6d2f752f37333634322f61727469636c65732f72706974656d702e706e67</a></p>

                    </div>
                    <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'coudingjournal';
    var disqus_identifier = 'http:\/\/blog.kulman.sk\/measuring-and-recording-the-room-temperature-with-a-raspberry-pi\/';
    var disqus_title = 'Measuring and recording the room temperature with a Raspberry Pi';
    var disqus_url = 'http:\/\/blog.kulman.sk\/measuring-and-recording-the-room-temperature-with-a-raspberry-pi\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
                </section>
            </div>
            <div class="footer">
    <div class="pure-menu pure-menu-horizontal pure-menu-open">
        <ul>
            <li>Powered by <a class="hugo" href="http://hugo.spf13.com/" target="_blank">hugo</a></li>
        </ul>
    </div>
</div>
<script src="http://blog.kulman.sk/js/all.min.js"></script>
        </div>
    </div>
</div>


<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-49528577-2', 'auto');
ga('send', 'pageview');

</script>

</body>
</html>
