<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Posts &middot; Coding Journal</title>

    <meta name="description" content="Adventures in the world of C#, F# and WinRT">

    <meta name="generator" content="Hugo 0.14" />
    <meta name="twitter:card" content="summary">
    
    <meta name="twitter:title" content="Posts &middot; Coding Journal">
    <meta name="twitter:description" content="Adventures in the world of C#, F# and WinRT">

    <meta property="og:type" content="article">
    <meta property="og:title" content="Posts &middot; Coding Journal">
    <meta property="og:description" content="Adventures in the world of C#, F# and WinRT">

    <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700|Oxygen:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/pure-min.css">
    <!--[if lte IE 8]>
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-old-ie-min.css">
    <![endif]-->
    <!--[if gt IE 8]><!-->
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-min.css">
    <!--<![endif]-->

    <link rel="stylesheet" href="http://blog.kulman.sk/css/all.min.css">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">

    <link rel="alternate" type="application/rss+xml" title="Coding Journal" href="http://blog.kulman.sk/index.xml" />
</head>
<body>


<div id="layout" class="pure-g">
    <div class="sidebar pure-u-1 pure-u-md-1-4">
    <div class="header">
        <hgroup>
            <h1 class="brand-title"><a href="http://blog.kulman.sk">Coding Journal</a></h1>
            <h2 class="brand-tagline"> Adventures in the world of C#, F# and WinRT </h2>
        </hgroup>

        <nav class="nav">
            <ul class="nav-list">
                
                <li class="nav-item">
                    <a class="pure-button" href="https://twitter.com/igorkulman"><i class="fa fa-twitter"></i> Twitter</a>
                </li>
                
                
                <li class="nav-item">
                    <a class="pure-button" href="https://github.com/igorkulman "><i class="fa fa-github-alt"></i> github</a>
                </li>
                
                <li class="nav-item">
                    <a class="pure-button" href="http://blog.kulman.sk/index.xml"><i class="fa fa-rss"></i> rss</a>
                </li>
            </ul>
        </nav>

<div>
<h2>About me</h2>

<p>Igor Kulman is currently working as Windows Phone developer, also building applications for Microsoft Azure and playing with F#.</p>
<p>
Interested in programming languages, functional programming and data science.</p>

</div>

    </div>
</div>


    <div class="content pure-u-1 pure-u-md-3-4">
        <div>
            
            <div class="posts">
                
                <h1 class="content-subhead">14 Mar 2014, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://blog.kulman.sk/pock8-beautiful-pocket-client-for-windows-phone/" class="post-title">Pock8: beautiful Pocket client for Windows Phone</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">Igor Kulman</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-Windows Phone" href="http://blog.kulman.sk/categories/windows-phone">Windows Phone</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>Recently I have released a new Windows Phone app called <a href="http://t.co/YMtrM84rwI">Pock8</a>. Pock8 is a beautiful Pocket (formerly Read It Later) client for Windows Phone. The design of the app was created by Jan Marek who worked with my on the <a href="http://windowsphone.com/s?appid=b2667b3c-9272-4416-b0be-c8adadc651e4">Shopping List Simple</a> app.</p>

<p><img src="/images/pocket.png" alt="" class="pure-img" ></p>

<p>Our goal was to create a Pocket client that would be really easy to use and that would have a nice and simple design. I think we have achieved our goal. The main features of the app are</p>

<ul>
<li>clean and simple design</li>
<li>optimized article view for comfortable reading</li>
<li>article cache for offline reading</li>
<li>dark theme for OLED screens or reading in the dark</li>
<li>support for receiving articles from other apps like WPCentral</li>
<li>listening to articles aloud</li>
<li>sharing articles</li>
</ul>

<p>In version 1.2 we really concentrated on user feedback and added many features that our users requested. We love and users and want to make them happy.</p>

<p>The app is free to use with one limitation, all the list display just 5 articles at any time. You can use an in-app purchase to get rid of the limitation and support further development of the app.</p>

<p>For more info about <a href="http://t.co/YMtrM84rwI">Pock8</a>, follow the app on Twitter at <a href="https://twitter.com/pock8app">@pock8app</a>.</p>

<p><img src="http://qrcode.kaywa.com/img.php?s=6&#038;d=http%3A%2F%2Fwindowsphone.com%2Fs%3Fappid%3Dc00715a7-d2d4-48c1-94e2-2ecc7c1b798b" alt="Pock8" style="max-width:100px" /></p>

                    </div>
                </section>
                
                <h1 class="content-subhead">05 Mar 2014, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://blog.kulman.sk/free-services-to-help-you-develop-mobile-apps/" class="post-title">Free services to help you develop mobile apps</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">Igor Kulman</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-Windows Phone" href="http://blog.kulman.sk/categories/windows-phone">Windows Phone</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>If you develop mobile or any other kinds of apps, you need to have your source code versioned and stored in a safe place, cooperate with other people, track information about the usage of your apps and track all the errors that may occur. There are many free services that may help you with those tasks. In this article I will give you a list of the ones I use when developing <a href="http://www.windowsphone.com/en-US/store/publishers?publisherId=Igor%2BKulman&amp;appId=c00715a7-d2d4-48c1-94e2-2ecc7c1b798b">my apps</a>.</p>

<p><strong>Bitbucket: source control and issue tracker</strong></p>

<p>I use Git as my source control system and all my private repos are stored at <a href="http://bitbucket.org/">Bitbucket</a> (public at <a href="http://github.com/igorkulman">GitHub</a>). Bitbucket offers unlimited number of private repos and cooperation with up to 5 other people for free.</p>

<p>For each private repo you can create a private issue tracker also for free, so all your code and issues are at the same place. The main advantage is that source control and issue tracker are connected, so you can comment or close issues directly from Git commits.</p>

<p><strong>Flurry: mobile analytics</strong></p>

<p>I use <a href="http://www.flurry.com/flurry-analytics.html">Flurry Analytics</a> to track the usage of my apps. Flurry supports Android, iOS, Windows Phone 8 and Blackberry. The tool is completely free and allows you to track events like app runs, unique users, page views or custom events with parameters. Tracking custom events with parameters is really handy, for example thanks to it I know how many users use which color theme in my Shopping List Simple app.</p>

<p><strong>BugSense: bug tracking</strong></p>

<p>Flurry also offers bug tracking, it is no very well done and you cannot get much use of it. To track application crashes and caught exceptions I use <a href="http://bugsense.com/">BugSense</a>. BugSense supports Android, iOS, HTML5, Windows Phone and Windows 8 apps.</p>

<p>Each logged error (exception) provides a complete stracktrace, number of occurrences and detailed info about each instance, like app version, phone model, country, etc. BugSense can be connected to GitHub, Bitbucket is no supported. Maybe in the future.</p>

<p>BugSense is a really useful service that can help you easily identify problems in your apps. Free version offers you 7 days bug info retention for up to 500 different errors for unlimited amount of apps.</p>

                    </div>
                </section>
                
                <h1 class="content-subhead">09 Jan 2014, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://blog.kulman.sk/c-scripting-console-for-asp-net-mvc-application/" class="post-title">C# scripting console for ASP.NET MVC application</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">Igor Kulman</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-Windows Azure" href="http://blog.kulman.sk/categories/windows-azure">Windows Azure</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>In a recent larger ASP.NET MVC project running in Windows Azure I needed to provide the advanced users a way to execute custom scripts directly through the webbrowser. A kind of a scripting console where users can create and execute their own scripts, that interact with the project and automate some tasks (that would otherwise require too many clicks).</p>

<p><strong>Choosing the language</strong></p>

<p>I thought about using Lua but I needed an easy way to integrate with some classes (repositories) used in the project. I decided to use C# as the scripting language and implement the scripting console using <a href="http://msdn.microsoft.com/en-us/vstudio/roslyn.aspx">Roslyn</a>. Roslyn is a really neat project and I recommend taking a look at it, if you do not already know it.</p>

<p>I extracted the main idea of my implementation of the scripting console and <a href="http://igorkulman.github.io/WebConsole/">posted it on GitHub</a>. I will walk you through it in this blog post.</p>

<p><strong>Basic implementation</strong></p>

<p>My basic solution consists of a Textarea the user writes the script to, the script then gets executed by Roslyn and the final result is shown. I also included a basic Repository class to show, that the scripts can use classes from the project. In the real implementation I have a logger class showing the ongoing logs and results but as I said, the Github repo is just an extracted basic idea of the scripting console.</p>

<p>To execute a C# script in your ASP.NET MVC (or any other) application, you first need to install the Roslyn package and its dependencies</p>

<script src="https://gist.github.com/igorkulman/8159321.js?file=roslyn-nuget.ps"></script>

<p>Let&#8217;s suppose you have the C# script you want to execute in a string variable called command obtained from the mentioned Textarea. First, you need to create the scripting engine and a session</p>

<p>There are ScriptEngine classes, one for C# and one for VB.NET so choose the one for C#. You can use any class as the context for the scripts. In the sample, I have a ScriptingContext class containing one public property of a type DataRepository. If you use a class as the context for the scripts, you can access all its properties (Repository of type DataRepository in my case) in the scripts.</p>

<p>To use a class as the context for the scripts, just pass it to the Roslyn session</p>

<script src="https://gist.github.com/igorkulman/8159321.js?file=roslyn-session.cs"></script>

<p>If you want to use more than the core C# libraries, you need to do some referencing and importing. If you are using a class as the context for the scripts, you need to reference its assembly. Suppose you want to use classes and methods from System.Xml and System.Xml.Linq in your scripts. First, you need to add references to the session</p>

<script src="https://gist.github.com/igorkulman/8159321.js?file=roslyn-context.cs"></script>

<p>and then import them to the session</p>

<script src="https://gist.github.com/igorkulman/8159321.js?file=roslyn-import.cs"></script>

<p>Everything is set up now, so just execute the script and get the result</p>

<script src="https://gist.github.com/igorkulman/8159321.js?file=roslyn-exec.cs"></script>

<p>The result of the script is the result of the last expression of the script so I recommend using a logger class in the context if you want to get more information about the execution of your script.</p>

<p><strong>Conclusion</strong></p>

<p>Thanks to Roslyn, I was able to create a really usable scripting console for the project and allow users to automate many tasks using C# scripts. This article and the demo project describe just the basics, there are many ways to make the experience better. I for example use the <a href="http://codemirror.net/">CodeMirror</a> editor to provide C# syntax highlighting, to allow users to upload ZIP files they can process in their scripts, etc.</p>

<p>Source code: <a href="https://github.com/igorkulman/WebConsole">WebConsole</a></p>

                    </div>
                </section>
                
                <h1 class="content-subhead">02 Dec 2013, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://blog.kulman.sk/creating-a-search-box-with-reactive-extensions-and-mvvm/" class="post-title">Creating a Search box with Reactive Extensions and MVVM</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">Igor Kulman</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-Windows Phone" href="http://blog.kulman.sk/categories/windows-phone">Windows Phone</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>Having a Search box in a Windows Phone app is a common use-case but it is only rarely done right. A good Search box does not have a Search button associated with it that the users have to click when they are finished typing and want to start the search. A good Search box starts the search immediately when the user stops typing (for a certain period of time).</p>

<p>You can implement this functionality with some nasty code using a DispatcherTimer, or you can use <a href="http://msdn.microsoft.com/en-us/data/gg577609.aspx">Reactive Extensions</a>. You can use Reactive Extensions directly on a TextBox representing the Search box, but if you use MVVM (and you should) you need to attach to the property associated with the Search box instead.</p>

<p>Suppose the ViewModel contains a string property called SearchTerm (with two-way binding to the Search box) and an event called PropertyChanged (used for the INotifyPropertyChanged implementation). We need to observe the changes of the SearchTerm property. There is no way to do it directly, we need to observe the PropertyChanged event instead.</p>

<p>We need to create an observable from the PropertyChanged event, subscribe to it filtering only the PropertyChanged calls regarding the SearchTerm property, throttling for 0.5 seconds</p>

<p>Using the throttle operator we will get exactly the desired behaviour of executing the Search method 0.5 seconds after the user stopped typing.</p>

<p><script src="https://gist.github.com/7657908.js"></script></p>

<p>However, there is a small problem. The SearchTerm property changes (and fires the PropertyChanged event) only when the Search box loses focus. We need to make the SearchTerm property change after each letter typed instead. In WPF that would be trivial using UpdateTrigger, but Windows Phone does not support UpdateTrigger.</p>

<p>We need to create a custom binding utility</p>

<p><script src="https://gist.github.com/7657969.js"></script></p>

<p>and apply it to the Search box</p>

<p><script src="https://gist.github.com/7658031.js"></script></p>

                    </div>
                </section>
                
                <h1 class="content-subhead">25 Nov 2013, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://blog.kulman.sk/using-the-debuggerdisplay-attribute-for-better-debugging-experience/" class="post-title">Using the DebuggerDisplay attribute for better debugging experience</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">Igor Kulman</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-Programming in general" href="http://blog.kulman.sk/categories/programming-in-general">Programming in general</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>When debugging a C# program in Visual Studio, I tend to always hover over the variables to glance at their values and structure instead of explicitly writing their names into the watch window. If I want to explore say a collection, I need to unfold each of the items using the + button to get an idea about the data:</p>

<p><img src="/images/debug1.png" alt="" class="pure-img" ></p>

<p>This is not very comfortable, so thankfully, there is a way to make this experience better, using the <a href="http://msdn.microsoft.com/en-us/library/system.diagnostics.debuggerdisplayattribute(v=vs.110).aspx">DebuggerDisplay</a> attribute. This attribute can be applied to any class (and struct, enum, property, field, delegate, assembly) and allows you to define the information about the class you wanto to see in the debugger.</p>

<p>Give the attribute a string to be displayed and in this string you can reference any data from the class:</p>

<p><script src="https://gist.github.com/7640468.js"></script></p>

<p>When you hover over the data now, you will see a nice readable &#8220;labels&#8221;:</p>

<p><img src="/images/debug2.png" alt="" class="pure-img" ></p>

<p>If you do not want to add the DebuggerDisplay attribute to all your classes manually, you can use the <a href="https://github.com/Fody/Visualize">Visualize</a> addin for <a href="https://github.com/Fody/Fody">Fody</a>. Visualize will add the DebuggerDisplay atribute to all your classes, using all the classe&#8217;s properties in the &#8220;label&#8221;.</p>

<p><strong>Warning</strong>: showing this &#8220;labels&#8221; takes some time, so do not reference to many data fields.</p>

                    </div>
                </section>
                
                <h1 class="content-subhead">02 Oct 2013, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://blog.kulman.sk/returning-files-in-nancyfx/" class="post-title">Returning files in NancyFX</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">Igor Kulman</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-Windows Azure" href="http://blog.kulman.sk/categories/windows-azure">Windows Azure</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>In my current project, I have chosen <a href="http://nancyfx.org/">NancyFx</a> to implement a REST API. NancyFx is a .NET framework known for its &#8220;<a href="https://github.com/NancyFx/Nancy/wiki/Introduction#the-super-duper-happy-path">super-duper-happy-path</a>&#8220;.</p>

<p>In one use case I generate a ZIP file in the temp folder and I want the API to return this ZIP file. NancyFx contains a Responses.AsFile helper but it works only with paths relative to the application.</p>

<p>If you have an absolute path of a file, you cannot use it. You need to create a StreamResponse and return the file as an attachment</p>

<p><script src="https://gist.github.com/6791265.js"></script></p>

                    </div>
                </section>
                
                <h1 class="content-subhead">18 Sep 2013, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://blog.kulman.sk/developing-windows-store-apps-with-caliburn-micro-part-4-services-and-dependency-injection/" class="post-title">Developing Windows Store apps with Caliburn Micro Part 4: services and dependency injection</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">Igor Kulman</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-WinRT" href="http://blog.kulman.sk/categories/winrt">WinRT</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>In this installment of the series I will show you how user data services. We will finally use the Unity DI container that is part of the project setup.</p>

<p><strong>Data and Services</strong></p>

<p>In next installment we will be showing a list of products, so let&#8217;s create a simple Product class first in the Data directory:</p>

<p><script src="https://gist.github.com/6606102.js"></script></p>

<p>PropertyChangedBase is a base class implementing the INotifyPropertyChanged interface and the ImplementPropertyChanged attribute makes sure it&#8217;s method is called for all the property changes. (More about Fody <a href="http://blog.kulman.sk/inotifypropertychanged-the-easy-way-in-windows-phone-and-windows-8/" title="INotifyPropertyChanged the easy way in Windows Phone and Windows 8">here</a>)</p>

<p>All the operations will be handled by a service implementing the IProductService interface:</p>

<p><script src="https://gist.github.com/6606127.js"></script></p>

<p>You can implement this interface any way you want. To keep things simple I chose an implementation with two hardcoded products:</p>

<p><script src="https://gist.github.com/6606170.js"></script></p>

<p><strong>Registering services</strong></p>

<p>All our services need to be registered with the Unity DI container before being used. The place to do it is the App class (App.xaml.cs file). You can override the Configure method to do it:</p>

<p><script src="https://gist.github.com/6607482.js"></script></p>

<p>This registers the ProductService class to the IProductService interface. The new ContainerControlledLifetimeManager() parameter is Unity&#8217;s way of setting the registration to be a singleton.</p>

<p><strong>Injecting services into ViewModel</strong></p>

<p>Injecting the ProductService into our MainViewModel is very simple. Just declare a IProductService variable and initialize it from constructor. Unity will take care of the rest:</p>

<p><script src="https://gist.github.com/6607538.js"></script></p>

<p>Next time we will implement a typical master-detail scenario showing products usign the ProductService whe have created. All the code is again <a href="https://github.com/igorkulman/CaliburnDemoWinRT">available at GitHub</a>.</p>

                    </div>
                </section>
                
                <h1 class="content-subhead">20 Aug 2013, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://blog.kulman.sk/succinctly-series-of-free-books-for-programmers/" class="post-title">Succinctly series of free books for programmers</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">Igor Kulman</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-Programming in general" href="http://blog.kulman.sk/categories/programming-in-general">Programming in general</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>I have recently come across an intreresting project by <a href="http://www.syncfusion.com?UTM_medium=kulmanblogreview">Syncfusion</a>, a company providing software components for the Microsoft platform.</p>

<table style="margin-bottom:20px;">
  <tr>
    <td width="200">
      <img src="http://www.syncfusion.com/Content/en-US/Downloads/Images/Ebooks/git_img.PNG" width="120" height="160" />
    </td>
    
    <td width="200">
      <img src="http://www.syncfusion.com/Content/en-US/Downloads/Images/Ebooks/fsharp-succinctly.PNG" width="120" height="160" />
    </td>
    
    <td>
      <img src="http://www.syncfusion.com/Content/en-US/Downloads/Images/Ebooks/iOS_succinctly.PNG" width="120" height="160" class="alignnone" />
    </td>
  </tr>
</table>

<p>The have created a series of books for programmes called the <a href="http://www.syncfusion.com/resources/techportal/ebooks?UTM_medium=kulmanblogreview">Succinctly series</a>. The goal of the series is to create 50-100 pages ebooks covering various topics. Each book should give you an introduction to the topic inc a succint way, so you do not have to read thick books or spend time finding relevant blog post covering the selected topic.</p>

<p>All the 20 books covering topics like Data Structures, iOS, Windows Store apps, F#, Git, Gis, HTTP, JQuery, Knockout.js ann many more ale completely free and promise to stay free forever, including all the updates. They are all available in PDF and Kindle format.</p>

<p>I have read two books so far; Git Succinctly and F# Succinctly. They were both well written and I would recommend them to programmers wanting to learn about those technologies.</p>

<p><strong>The Syncfusion Raffle!</strong></p>

<p>Syncfusion offers for all the readers of this blog to get one of three free licenses for their products. The winners can choose between <a href="http://www.syncfusion.com/products/windows-phone?UTM_medium=kulmanblogreview">Essentials Studio for Windows Phone</a> and <a href="http://www.syncfusion.com/products/winrt?UTM_medium=kulmanblogreview">Essentials Studio for WinRT</a>.</p>

<p>To enter the raffle:</p>

<ol>
<li><p>Before October 1st 2013: send out a tweet containing the #ebooks and #Syncfusion hashtag, and a link to this blog post. For example: Free #books for programmers by #Syncfusion <a href="http://bit.ly/151KgQ0">http://bit.ly/151KgQ0</a>.</p></li>

<li><p><a href="https://support.twitter.com/entries/80586-how-to-link-directly-to-an-individual-tweet">Grab the permalink</a>, and post the link to your tweet as a comment to this blog post, including info if you would like to win Windows Phone or WinRT components (make sure you use a valid email address to comment, I need to be able to contact you if you win!)</p></li>
</ol>

<p>One entry per person, normal contest rules apply. If you don’t have twitter, just post the message on your blog, Facebook, G+ …</p>

<p>The winners will be announced on October 1st 2013.</p>

                    </div>
                </section>
                
                <h1 class="content-subhead">13 Aug 2013, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://blog.kulman.sk/developing-windows-store-apps-with-caliburn-micro-part-3-saving-and-restoring-state/" class="post-title">Developing Windows Store apps with Caliburn Micro Part 3: saving and restoring state</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">Igor Kulman</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-WinRT" href="http://blog.kulman.sk/categories/winrt">WinRT</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>In the <a href="http://blog.kulman.sk/developing-windows-store-apps-with-caliburn-micro-part-2-navigation/" title="Developing Windows Store apps with Caliburn Micro Part 2: navigation">previous post</a> I stated that a well-behaved Windows Store app should remeber the View the user navigated to before suspension and navigate to this View upon next run. The View can contain some input that the user can fill in. A well-behaved Windows Store app should remember the user&#8217;s input and restore it after suspension.</p>

<p><strong>Saving and restoring state</strong></p>

<p>Implementation of the above-mentioned scenario is not very complicated, thanks to the project setup. If you want your ViewModel to be able to save and restore state, implement the IHaveState interface. It contains two method that you can override; SaveState and LoadState. In bith method you have access to a page state dictionary that you can use to save and load the state.</p>

<p>Let us reuse the SecondPageViewModel from the last post. Implement IHaveState, add two string properties and use the SaveState and LoadState method to save and load them using the page state dictionary</p>

<p><script src="https://gist.github.com/6173564.js"></script></p>

<p>To test it, first add two TextBoxes to the SecondPageView with two-way binding</p>

<p><script src="https://gist.github.com/6173636.js"></script></p>

<p>Now run the application, navigate to the SecondPageViewModel and fill in the TextBoxes. Switch to Visual Studio and invoke the Suspend and Shutdown command. When you run the application again, you will see the SecondPageViewModel with TextBoxes with the same values as before the suspension.</p>

<p>The code is again <a href="https://github.com/igorkulman/CaliburnDemoWinRT">available at Github</a>. If you are interested in the implementation of saving and loading state, read <a href="http://nybbles.blogspot.cz/2013/02/winrt-caliburnmicro-and-ioc-part-3.html">this article</a>.</p>

                    </div>
                </section>
                
                <h1 class="content-subhead">06 Aug 2013, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://blog.kulman.sk/developing-windows-store-apps-with-caliburn-micro-part-2-navigation/" class="post-title">Developing Windows Store apps with Caliburn Micro Part 2: navigation</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">Igor Kulman</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-WinRT" href="http://blog.kulman.sk/categories/winrt">WinRT</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>In this second part you will add another ViewModel and View and implement navigation between two ViewModels, including saving the navigation state between starts. The code is as always <a href="https://github.com/igorkulman/CaliburnDemoWinRT">available at Github</a>.</p>

<p><strong>Invoking ViewModel methods</strong></p>

<p>If you want to test out navigation between ViewModels, you first need something that will trigger the navigation. The easiest way to do this is to use a standard Button. If you do MVVM &#8220;by hand&#8221;, you are probably used to creating ICommand properties and binding them to the Button&#8217;s Command dependency property.</p>

<p>Caliburn Micro offers an easier way. If you want a Button to invoke a method on your ViewModel, just the give the button the same name as the name of the button. The method should be public void.</p>

<p>On the MainViewModel, create a public void GoToSecondPage method:</p>

<p><script src="https://gist.github.com/6103983.js"></script></p>

<p>In the MainView create a Button with x:Name=&#8221;GoToSecondPage&#8221;. When you start the application and click the button, a message dialog is shown, so you know the autobinding beetween your Button and your GoToSecondPage method works.</p>

<p><strong>Navigation</strong></p>

<p>As you may have noticed, a INavigationService is injected into the MainViewModel&#8217;s constructor. You can use this INavigationService to navigate between ViewModels.</p>

<p>In the ViewModels folder create a new ViewModel called SecondPageViewModel with one string property Title (exactly the same as the MainViewModel):</p>

<p><script src="https://gist.github.com/6103938.js"></script></p>

<p>In the Views folder, create a new View called SecondPageView as a Blank Page. Give it some colorful background so it is clearly distinguishable from the MainView:</p>

<p><script src="https://gist.github.com/6104005.js"></script></p>

<p>Now you can finally make the GoToSecondPage method navigate the user to the SecondPageViewModel. To do this, first get the Uri from the INavigationService using the strongly typed UriFor&lt;.&gt; method and then call the Navigate method:</p>

<p><script src="https://gist.github.com/6104023.js"></script></p>

<p><strong>Navigation with parameters</strong></p>

<p>In many cases you need to navigate to a ViewModel passing the ViewModel some parameters. This is as easy as adding a call to WithParam to your navigation code:</p>

<p><script src="https://gist.github.com/6104042.js"></script></p>

<p>You can use the WithParam method to give the ViewModel as many parameters as you want.</p>

<p><strong>Saving and loading navigation state</strong></p>

<p>A well-behaved Windows Store application should remember the last ViewModel active when the user exited the app and load this ViewModel when the user starts the application again. In our demo, this is not the case. You can test it by navigating to the SecondPageViewModel, switching to Visual Studio, using the Suspend and Shutdown option and starting the application again.</p>

<p>You need to fix this so when the suspended application starts again, it will show the SecondPageViewModel (unless the MainViewModel was active when the application was suspended). The Caliburn.Micro.Unity.WinRT package already contains the support for saving and restoring state.</p>

<p>First you need to make the Views inherit from the Caliburn.Micro.Unity.WinRT.Code.AppPage insted of Page and delete theirs OnNavigateTo methods. Then you need to explicitly save the state when the application starts. Open the App.xaml.cs and add the following method:</p>

<p><script src="https://gist.github.com/6104122.js"></script></p>

<p>If you now navigate to second page, suspend and shutdown the application and start it again, you will see the second page.</p>

<p>There is currently no way to navigate back from the SecondPageViewModel to the MianViewModel. I am fairly confident you can implement it by yourself using the INavigationService&#8217;s GoBack method.</p>

                    </div>
                </section>
                
            </div>
            
<div class="pagination">
  <nav role="pagination" class="post-list-pagination">
      
      <a href="/post/page/4/" class="post-list-pagination-item pure-button post-list-pagination-item-prev">
        <i class="fa fa-angle-double-left"></i>&nbsp;Newer
      </a>
      
    <span class="post-list-pagination-item post-list-pagination-item-current">Page 5 of 10</span>
    
      <a href="/post/page/6/" class="post-list-pagination-item pure-button post-list-pagination-item-next">
        Older&nbsp;<i class="fa fa-angle-double-right"></i>
      </a>
    
  </nav>
</div>


            <div class="footer">
    <div class="pure-menu pure-menu-horizontal pure-menu-open">
        <ul>
            <li>Powered by <a class="hugo" href="http://hugo.spf13.com/" target="_blank">hugo</a></li>
        </ul>
    </div>
</div>
<script src="http://blog.kulman.sk/js/all.min.js"></script>
        </div>
    </div>
</div>

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-49528577-2', 'auto');
ga('send', 'pageview');

</script>

</body>
</html>
