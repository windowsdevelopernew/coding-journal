<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Windows Phone &middot; Coding Journal</title>

    <meta name="description" content="Adventures in the world of C#, F# and WinRT">

    <meta name="generator" content="Hugo 0.14" />
    <meta name="twitter:card" content="summary">
    
    <meta name="twitter:title" content="Windows Phone &middot; Coding Journal">
    <meta name="twitter:description" content="Adventures in the world of C#, F# and WinRT">

    <meta property="og:type" content="article">
    <meta property="og:title" content="Windows Phone &middot; Coding Journal">
    <meta property="og:description" content="Adventures in the world of C#, F# and WinRT">

    <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700|Oxygen:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/pure-min.css">
    <!--[if lte IE 8]>
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-old-ie-min.css">
    <![endif]-->
    <!--[if gt IE 8]><!-->
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-min.css">
    <!--<![endif]-->

    <link rel="stylesheet" href="http://localhost:1313//css/all.min.css">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">

    <link rel="alternate" type="application/rss+xml" title="Coding Journal" href="http://localhost:1313//index.xml" />
</head>
<body>


<div id="layout" class="pure-g">
    <div class="sidebar pure-u-1 pure-u-md-1-4">
    <div class="header">
        <hgroup>
            <h1 class="brand-title"><a href="http://localhost:1313/">Coding Journal</a></h1>
            <h2 class="brand-tagline"> Adventures in the world of C#, F# and WinRT </h2>
        </hgroup>

        <nav class="nav">
            <ul class="nav-list">
                
                <li class="nav-item">
                    <a class="pure-button" href="https://twitter.com/igorkulman"><i class="fa fa-twitter"></i> Twitter</a>
                </li>
                
                
                <li class="nav-item">
                    <a class="pure-button" href="https://github.com/igorkulman "><i class="fa fa-github-alt"></i> github</a>
                </li>
                
                <li class="nav-item">
                    <a class="pure-button" href="http://localhost:1313//index.xml"><i class="fa fa-rss"></i> rss</a>
                </li>
            </ul>
        </nav>

<div>
<h2>About me</h2>

<p>Igor Kulman is currently working as Windows Phone developer, also building applications for Microsoft Azure and playing with F#.</p>
<p>
Interested in programming languages, functional programming and data science.</p>

</div>

    </div>
</div>


    <div class="content pure-u-1 pure-u-md-3-4">
        <div>
            
            <div class="posts">
                
                <h1 class="content-subhead">24 Dec 2014, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://localhost:1313/dialog-helper-for-universal-apps/" class="post-title">Dialog helper for Universal Apps the easy way</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">Igor Kulman</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-Windows Phone" href="http://localhost:1313//categories/windows-phone">Windows Phone</a><a class="post-category post-category-WinRT" href="http://localhost:1313//categories/winrt">WinRT</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>Today I read Joost van Schaik&#8217;s blog post called <a href="http://dotnetbyexample.blogspot.nl/2014/12/a-behavior-to-show-messagedialog-from.html">A behavior to show a MessageDialog from a MVVMLight viewmodel in Universal apps–with callbacks</a>. I am not a MVVMLight guy (I use Caliburn.Micro) and I personally use an approach that uses a little less code, employing a helper class.</p>

<p><strong>Helper class</strong></p>

<script src="https://gist.github.com/igorkulman/fda1860b35d5312e9157.js?file=DialogHelper.cs"></script>

<p>with a simple usage in ViewModel</p>

<script src="https://gist.github.com/igorkulman/fda1860b35d5312e9157.js?file=usage.cs"></script>

<p>and in the View (making use of Caliburn.Micro mapping the AppBarButton with x:Name=&#8221;Message&#8221; to the Message method in the ViewModel</p>

<script src="https://gist.github.com/igorkulman/fda1860b35d5312e9157.js?file=usage.xaml"></script>

<p>If you want to show a dialog with just the Ok button, set cancelText to null and do not process the helper method&#8217;s result.</p>

<p><strong>Simple service</strong></p>

<p>If you do not like static classes, just make it service</p>

<script src="https://gist.github.com/igorkulman/fda1860b35d5312e9157.js?file=DialogHelperService.cs"></script>

<p>the usage in the ViewModel will change just slightly</p>

<script src="https://gist.github.com/igorkulman/fda1860b35d5312e9157.js?file=usage2.cs"></script>

<p>and you can easily mock the service and test the ViewModel.</p>

<p>You can find the complete code in a sample solution on GitHub: <a href="https://github.com/igorkulman/SampleMessagePopup">https://github.com/igorkulman/SampleMessagePopup</a>.</p>

                    </div>
                </section>
                
                <h1 class="content-subhead">23 Dec 2014, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://localhost:1313/creating-a-fake-splashscreen-for-your-universal-app/" class="post-title">Creating a fake splashscreen for your Universal App</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">Igor Kulman</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-Windows Phone" href="http://localhost:1313//categories/windows-phone">Windows Phone</a><a class="post-category post-category-WinRT" href="http://localhost:1313//categories/winrt">WinRT</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>Sometimes you may want your app to display the startup splashscreen a bit longer, so you can initialize or fetch some data necessary for the app to run. To achieve this, you can create a fake splaschreen, a View that looks just like the splashscreen, does all the work and redirects to the real main View afterwards.</p>

<p>In theory, it is quite simple:</p>

<ul>
<li>Create a SplashScreenView with just the right background and the splashscreen image</li>
<li>Set the app to display SplashScreenView at startup</li>
<li>Do all the initializing and data fetching in SplashScreenViewModel and redirect to there real MainView</li>
</ul>

<p>This works quite well with Windows 8.1, but on Windows Phone 8.1 there is a problem. When you run the Windows Phone 8.1 app, you will see a page transition happen between the real splashscreen and your SplashScreenView. This looks strange, so it is better to get rid of it.</p>

<p><strong>Managing the Frame transitions on Windows Phone 8.1</strong></p>

<p>To fix this issue, you can disable the transitions on the frame and add them manually to each View other than SplashScreenView, but there is a better way. You can disable the transitions when creating the frame and the enable them after navigating from the SplashScreenView. Do not forget the <a href="http://blog.kulman.sk/why-universal-apps-as-not-as-universal-as-you-may-think/" title="Why Universal Apps as not as universal as you may think">#ifdefs, because it is one of those many things that are Windows Phone specific in the Universal Apps</a>.</p>

<p><script src="https://gist.github.com/d61c0a71e8ed0e2fbc1d.js"></script></p>

<p>This makes the illusion of the fake splashscreen perfect, but I would recommend adding a ProgressBar or ProgressRing to the SplashScreenView so the users do not have the feeling that your app froze.</p>

                    </div>
                </section>
                
                <h1 class="content-subhead">18 Dec 2014, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://localhost:1313/why-universal-apps-as-not-as-universal-as-you-may-think/" class="post-title">Why Universal Apps as not as universal as you may think</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">Igor Kulman</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-Windows Phone" href="http://localhost:1313//categories/windows-phone">Windows Phone</a><a class="post-category post-category-WinRT" href="http://localhost:1313//categories/winrt">WinRT</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>I have been developing Windows Phone apps for a few years now, always sticking to Silverlight and keeping using Silverlight also after Microsoft announced the WinRT flavor of Windows Phone apps and the so called Universal Apps. The Windows Phone 8.0 and 8.1 Silverlight APIs have some limitations, but are now well known do not contain many bugs. They are the safe choice if you want to create a Windows Phone apps. And do not forget that there are still many device running Windows Phone 8 (like Verizon customers in the US) that never got the 8.1 updated promised to everyone during the summer.</p>

<p><strong>Really universal?</strong></p>

<p>Windows Phone 8.1 XAML and Universal Apps included WinRT APIs that have many problems, including some that there is no solution for. I used the WinRT APIs when creating first Windows 8 apps about 2 years ago, so I am not new to the APIs. I have not touched the WinRT APIs again until recently, because there was no demand for Windows 8 or Windows 8.1 apps. Why would it? People use Windows 8 or 8.1 but do not care about Metro apps, they give them no value compared to &#8220;normal&#8221; Win32 and Windows tablets are practically non-exists (expect for the Surface tablets owned by few programmers and maybe no one else).</p>

<p><strong>Universal Apps</strong></p>

<p>Recently, a client was thinking about adding a Windows Phone app for their service the its existing Android and iOS apps, but they did not think it was worth the money. So the local Microsoft branch told them they would pay for the app (seems like many of the app here are created this way) under two conditions. The app had to be a Universal App and had to be finished before the years end. The client agreed and I had to create a Universal App. And the problems started.</p>

<p>In theory, Universal Apps are supposed to make code sharing between Windows Phone and Windows 8.1 simple and allow you to reuse as much code as possible. This works on the trivial Microsoft samples, but try to create a real world app. I have a business logic project with API calls, storage, etc. in a portable class library (like I always did before Universal Apps existed) and I created an Universal App from the template. And the #ifdef hell started.</p>

<p><img src="/images/56995992.jpg" alt="" class="pure-img" ></p>

<p><strong>#ifdefs everywhere</strong></p>

<p>With Universal Apps you can safely share the ViewModels (I am using Caliburn.Micro) .. and that is about it. You have to create separate Views (because on phone and desktop information is typically displayed different), but the worst parts are the #ifdefs.</p>

<p>You need to set some properties of the main Frame, you have to use #ifdefs because the frame is a bit different on phone and desktop (like animations). You want to reuse as much DataTemplates as possible, so add another #ifdef for adding the right resource dictionary or many #ifdefs in the data templates to tune them, because it does not matter you use GridView on phone and GridView on desktop, they behave a bit differently in some cases.</p>

<p>Then you need to add audio playback to your app. There is a background audio playback API for Windows Phone 8.1 and none for Windows 8.1 In Windows 8.1 you need a global MediaElement in your Frame and handling everything differently. So add another big #ifdef. And by the way, the background audio playback API for Windows Phone 8.1 really sucks compared to the old Silverlight APIs. Just try downloading the <a href="https://code.msdn.microsoft.com/windowsapps/BackgroundAudio-63bbc319">sample form MSDN</a> and hitting Suspend and Resume in Visual Studio, the background agent crashes horribly, without any exception and takes your Visual Studio instance to hell with it. And of course, the background audio playback API does not work on some phones. <a href="https://stackoverflow.com/questions/26175599/windows-phone-8-1-rt-backgroundmediaplayer-not-working">Just does not work</a>. I confirmed this finding with other developers. Another messed up API that used to work before the whole Universal Apps hype. And explain this to the client who sees that things like this work on iOS, work on Android, hell, they even for on Windows Phone 8.0 (Slivelight) apps.</p>

<p><strong>More messed up APIs</strong></p>

<p>So background audio playback API for Windows Phone 8.1 is messed up, anything else? Sure. BackgroundDownloader is another example. In Silverlight, there was a BackgroundDownloader that was quite limited, but it worked. In Universal Apps, there is a new BackgroundDownloader with some new features, and some essential ones missing. For example, in Silverlight, each download could have a Tag, where you can store any data so you know something about the download when it finishes (to what business entity it belongs, etc.). Not any more in Universal Apps. There is no Tag, so you have to build and manage you own kind of index for all the downloads, so you can actually match them to your business entities. An annoyance, but nothing you cannot manage, right.</p>

<p>The BackgroundDownloader in Universal Apps has a bigger problem. It sometimes crashes so horribly, that it reboots the whole device! No exception, no logs, just a reboot. The maximum limit for the BackgroundDownloader is 1000 downloads, but try adding say 300 to the queue, cancelling them after a few minutes (does not seem to matter if you use one cancellation token or give each download its own) and there is a good chance the phone or the emulator will reboot itself. Not always, but quite often. Again, try explaining this issue to the client.</p>

<p><strong>Performance</strong></p>

<p>In Silverlight, I commonly used the LongListSelector to display data, using it with a WrapPanel when I needed to create a two column layout. The LongListSelector is gone, in Universal Apps you have to use GridView also on Windows Phone. Or you can use the ListView with a custom wrap panel you write yourself or download somewhere, but it takes some effort to make it do virtualization properly.</p>

<p>So you use GridView on both Windows Phone 8.1 and Windows 8.1 to make it consistent. Add tens f of items with images to it and the performance starts to really suffer. Gray placeholders will show up and more importantly, <a href="https://stackoverflow.com/questions/27488201/gridview-and-placeholders-that-never-disapper-in-windows-8-and-windows-phone-app">never disappears</a>. You do not event need images, just add about 300 text only items to the GridView and the gray placeholders will starts to show when scrolling.</p>

<p>Need another proof that the WinRT controls are slower? Just <a href="https://www.youtube.com/watch?v=nn5hVq6Q-zo">take a look at this video comparing the media app on and old Windows Phone 7 to the media app on a much more powerful device running Windows Phone 8.1</a>. You can see that the old, single core device runs the Silverlight apps faster than the new powerful phone runs the new WinRT equivalent of the app.</p>

                    </div>
                </section>
                
                <h1 class="content-subhead">24 Nov 2014, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://localhost:1313/rest-service-base-class-for-windows-phone-8-1-xaml-apps/" class="post-title">REST service base class for Windows Phone 8.1 XAML apps</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">Igor Kulman</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-Windows Phone" href="http://localhost:1313//categories/windows-phone">Windows Phone</a><a class="post-category post-category-WinRT" href="http://localhost:1313//categories/winrt">WinRT</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>Communicating with a JSON based REST service is a task that many Windows Phone apps have to do. My apps sure do it a lot so I came up with a base class that I use in all of them, <a href="https://github.com/igorkulman/Kulman.WPA81.BaseRestService">put it on Github</a> and <a href="https://www.nuget.org/packages/Kulman.WPA81.BaseRestService/">created a Nuget package</a>, so your apps could use it to.</p>

<p>The usage of this base class is simple. Create your service class and inherit from BaseRestService. The minimum you need to do to make it work is to override the GetBaseUrl() method to set the base url for all the requests. You can (but do not have to) also override the GetRequestHeaders() method to set the default request headers.</p>

<script src="https://gist.github.com/igorkulman/405732bf92858dba1c3c.js?file=usage1.cs"></script>

<p>and you can now use the following protected methods</p>

<script src="https://gist.github.com/igorkulman/405732bf92858dba1c3c.js?file=methods.cs"></script>

<p>All the JSON serialization and deserialization is automatically done for you. If you need to execute some action before every request (like checking if the OAuth token expired and refreshing it), simply override the OnBeforeRequest() method.</p>

<p>Methods in your service may then look like this</p>

<script src="https://gist.github.com/igorkulman/405732bf92858dba1c3c.js?file=usage2.cs"></script>

<p>In case of an error, the methods throw either a DeserialziationException with the original data if deserialization failed, or a ConnectionException with the HTTP status code.</p>

<p>if you need some additional features, just raise an issue in the <a href="https://github.com/igorkulman/Kulman.WPA81.BaseRestService">Github repo</a>, or create a pull request.</p>

                    </div>
                </section>
                
                <h1 class="content-subhead">03 Nov 2014, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://localhost:1313/visual-studio-template-for-caliburn-micro-windows-phone-apps/" class="post-title">Visual Studio template for Caliburn.Micro Windows Phone apps</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">Igor Kulman</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-Windows Phone" href="http://localhost:1313//categories/windows-phone">Windows Phone</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>I have been building Windows Phone apps using the <a href="https://github.com/Caliburn-Micro/Caliburn.Micro">Caliburn.Micro</a> framework for some time now. Setting up a new project takes some time and can be easily automated, so I decided to create a Visual Studio template for Windows Phone apps build with Caliburn.Micro.</p>

<p>The templates can be downloaded from <a href="https://visualstudiogallery.msdn.microsoft.com/21b4568e-1fb9-4881-9d51-8e1ea0160a9f">the Visual Studio Extensions gallery</a> and used to build Windows Phone 8 and Windows Phone 8.1 Silverlight apps. It contains the basic setup with Caliburn Micro and <a href="http://blog.kulman.sk/inotifypropertychanged-the-easy-way-in-windows-phone-and-windows-8/" title="INotifyPropertyChanged the easy way in Windows Phone and Windows 8">Fody</a>, with a sample view and viewmodel.</p>

<p>The <a href="https://github.com/igorkulman/CaliburnWP8AppVSIX">source code is available on GitHub</a>, so if you want to modify it to best suit your needs, feel free to do it.</p>

                    </div>
                </section>
                
                <h1 class="content-subhead">16 Sep 2014, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://localhost:1313/tvtime-track-your-favorite-tv-shows-on-windows-phone/" class="post-title">TvTime: track your favorite TV shows on Windows Phone</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">Igor Kulman</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-Windows Phone" href="http://localhost:1313//categories/windows-phone">Windows Phone</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>We have just had released a new app called TvTime. TvTime is a simple and beautiful app for tracking your favorite TV Shows. Simply add a find the TV Shows you like, add them to the list and get detailed information about actors, air times and episodes. If you decide to track unwatched episodes, you will always know what you have already seen. So get TvTime now so you never miss your favorite TV Show!</p>

<p><img src="/images/tvtimepromo.jpg" alt="" class="pure-img" ></p>

<p>Main features</p>

<ul>
<li>clean and simple design</li>
<li>thousands of TV Shows to choose</li>
<li>tracking unwatched episodes</li>
<li>live tile</li>
<li>show and episodes details</li>
</ul>

<p>You can download the app for free <a title="TvTime download" href="http://www.windowsphone.com/s?appid=517d314b-cf64-41ed-9407-21b2c6e546c0" target="_blank">here</a>.</p>

<p><img  src="http://qrfree.kaywa.com/?l=1&#038;s=8&#038;d=http%3A%2F%2Fwww.windowsphone.com%2Fs%3Fappid%3D517d314b-cf64-41ed-9407-21b2c6e546c0" width="150" height="150" /></p>

                    </div>
                </section>
                
                <h1 class="content-subhead">15 Sep 2014, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://localhost:1313/what-to-put-on-the-about-screen-of-your-windows-phone-app/" class="post-title">What to put on the about screen of your Windows Phone app</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">Igor Kulman</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-Windows Phone" href="http://localhost:1313//categories/windows-phone">Windows Phone</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>The about screen of a Windows Phone app is usually the most overlooked part of the app. Sure, the users usually visit it only once, after installing the app, if ever, but it is a part of your Windows Phone app that you could put to a good use.</p>

<p>If you have ever taken a DVLUP challenge you may have noticed, that they recommend you place a text describing your app on the about screen. I really do not agree with this. If users install your app, they know what the app does and if they cannot figure it out, then your UI is a failure and the about screen will not save you.</p>

<p>After some trial and error I came up with a standardized about screen I now use in all my apps. It is a pivot with two tabs; About and More apps.</p>

<p>The About tab is the most important. It shows the version of the app, this is important when users report problems, information about the author and the designer of the app with Twitter contacts and buttons to send feedback via email and rate the app in the Windows Phone Store. Providing a feedback mechanism is really important, the users will write you about an issue they have with the app instead of just giving you a bad review in the Windows Phone Store.</p>

<p><img src="/images/about1.png" alt="" class="pure-img" ></p>

<p>The screenshot shows the About page from my latest app <a href="http://blog.kulman.sk/tvtime-track-your-favorite-tv-shows-on-windows-phone/" title="TvTime: track your favorite TV shows on Windows Phone">TvTime</a>. You can easily get the app version from the manifest using the <a href="https://github.com/igorkulman/Kulman.WP8/blob/master/Kulman.WP8/Code/ManifestHelper.cs">ManifestHelper</a> from the <a href="https://www.nuget.org/packages/Kulman.WP8/">Kulman.WP8 Nuget package</a>.</p>

<p>You should know that submitting an app is just a beginning, you then have to answer to user feedback, provide bug fixes, etc. In my case, the Feedback button launches an EmailComposeTask with filled in recipient and subject so the users just write what is on their minds and send it to me. I always answer each and every one of those feedback emails.</p>

<p>I use the second tab, More apps, as a form of cross-promotion.</p>

<p><img src="/images/about2.png" alt="" class="pure-img" ></p>

<p>If the users like your app, they may also like your other apps so why not make it easier for them to get them. I have a simple XML file with names, links and icons of my apps hosted on a webserver that the app downloads and displays, of course removing itself from the list.</p>

<p>To sum it all up, do not underestimate your about screen, use it to provide your users with a feedback mechanism. You will make your apps better.</p>

                    </div>
                </section>
                
                <h1 class="content-subhead">29 Aug 2014, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://localhost:1313/experience-with-being-featured-in-the-red-stripe-deal-promotion-on-windows-phone/" class="post-title">Experience with being featured in the Red Stripe Deal promotion on Windows Phone</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">Igor Kulman</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-Windows Phone" href="http://localhost:1313//categories/windows-phone">Windows Phone</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>I was offered to to take part in the Red Stripe Deal promotion on Windows Phone with my <a href="http://shoppinglist.kulman.sk/">Shopping List Simple</a> app from 21st August to 28th August.</p>

<p><img src="/images/sk.png" alt="" class="pure-img" ></p>

<p>In this promotion, your app has to cost less than half of the normal price. The app normally costs 1.29 USD in most countries and 0.99 USD in Czech Republic, Slovakia and Russia to boost the sales. The minimum price in Windows Phone Store is 0.99 USD so the app had to be made free for the promotion. So I filled in the form saying that I want my app to be free in all the countries during the promotion. When the time of the promotion came, the price was set to free in all the countries except Czech Republic, Slovakia and Russia. First day, first problem.</p>

<p><strong>Positives</strong></p>

<p>The promotion was a success with about 25 000 (free) downloads.</p>

<p>Another positive effect was that I got contacted by users offering translations of the app and acquired Turkish and Ukrainian translations.</p>

<p><strong>Negatives</strong></p>

<p>As soon as the Red Stripe Deal promotion ended, I submitted a new version of the app with the two new translations &#8230; and the problems started. The users started to report that the update fails to install, usually with 80004005 as the error code. If you try to google this code, you find out it is too generic, ranging from Zune to XBOX and that no helpful info can be found about this error code.</p>

<p>I contacted Microsoft support and they, as usual, were not helpful at all. They replied that everything is ok with the app, the error code indicates WiFi issues, so it is a problem on the users&#8217; end and that they should contact the support.</p>

<p>There was another problem. Users who got the app for free thanks to the Red Stripe Deal and uninstalled it, had to pay for when reinstalling. This really sucks and I am sure that in the past, when you got an app while it was free you never had to pay for it in the future. It looks like things changed, because I got this from Microsoft:</p>

<blockquote>
<p><del datetime="2014-08-29T17:04:05+00:00">In regards to users having to pay for the app if they re-install it, this works as designed. If the app was free when it was downloaded and the price changes between the time the consumer re-installs they will be charged whatever the “New” price is.</del></p>
</blockquote>

<p>Looks like this was an misinformation from Microsoft, they corrected it:</p>

<blockquote>
<p>Let me correct myself. The only time I see the app being changed is when I use a device that is not tied to the live Id that I purchased it from. If I buy an app under myself@live.com and then login to another device using a different live Id I will have to pay for the app. If I use the same live Id I own the app and will not have to pay even if the price of the app has changed. You will also see a change for the app if I have loaded the app on the maximum number of devices allowed.</p>
</blockquote>

<p>The other error code, that the users were experiencing, was c101a7d1. Microsoft support sent my a link to a <a href="https://answers.microsoft.com/en-us/winphone/forum/wp7-sync/errors-of-c101a7d1-and-c101a006-on-windows-phone/822ec1be-9d07-4c0a-a4eb-7c6edf63e52d?page=2">discussion suggesting users uninstall the app and install it again</a>, meaning they would have to pay for it now (according to users who tried it), maybe all 25 000 of them! This is going to be a real blow to the reviews and ratings! And some people even thing I did it intentionally to make money!</p>

<p><strong>Conclusion</strong></p>

<p>So what did the Red Stripe Deal bring me? Many new users, but many of them angry about the update problems and need to buy the app when they uninstall it and it also made some of the &#8220;old&#8221; users angry about the update problem. Was it worth it?</p>

<p><strong>Update</strong>: Problem still not solved.</p>

<p>I told the users to contact Microsoft support as Microsoft support told me, but they report the support cannot / will not help them. The support guy I am in contact with did not want to believe this, so I had to ask one user for a screenshot of Microsoft support telling him they cannot help and send it to him. Did not help either.</p>

                    </div>
                </section>
                
                <h1 class="content-subhead">23 Jul 2014, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://localhost:1313/automatic-viewmodels-and-services-registration-for-not-only-caliburn-micro/" class="post-title">Automatic ViewModels and Services registration for (not only) Caliburn.Micro</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">Igor Kulman</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-Windows Phone" href="http://localhost:1313//categories/windows-phone">Windows Phone</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>My MVVM framework of choice, Caliburn.Micro, provides a simple Dependency Injection container, where you have to register all your ViewModels and Services. This is done in the Bootstraper&#8217;s Configure method and may look like this:</p>

<script src="https://gist.github.com/igorkulman/0353b26073fc11d3635f.js?file=reg1.cs"></script>

<p>where you typically register your ViewModels as per request and services as singletons.</p>

<p>Of course this is done just once, but having to register a ViewModel each time you create a new one can be a nuisance, especially in a large project.</p>

<p>There is a better way that uses reflection. First, you need to create attributes that will represent registration as per request and a s singleton:</p>

<script src="https://gist.github.com/igorkulman/0353b26073fc11d3635f.js?file=PerRequest.cs"></script>

<script src="https://gist.github.com/igorkulman/0353b26073fc11d3635f.js?file=Singleton.cs"></script>

<p>Iterating over all the non-abstract classes in your assemblies using reflection is quite easy, the tricky part is deciding when to register a class as &#8220;itself&#8221; and when to register it for an interface it implements. My rule of thumbs is that if the class implements exactly one interface, it is one of my services and I register it for that interface, otherwise I register it as itself (ViewModels descendant from Screen implement circa 5 interfaces).</p>

<p>The final registration code looks different for WinRT (Windows 8, Windows 8.1, Windows Phone 8.1 XAML)</p>

<script src="https://gist.github.com/igorkulman/0353b26073fc11d3635f.js?file=reg2.cs"></script>

<p>and for &#8220;classic&#8221; .NET (Windows Phone 8)</p>

<script src="https://gist.github.com/igorkulman/0353b26073fc11d3635f.js?file=reg3.cs"></script>

<p>because of reflection differences in WinRT. Do not forget to add the PerRequest or Singleton attribute to your classes to make it work.</p>

                    </div>
                </section>
                
                <h1 class="content-subhead">24 Jun 2014, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://localhost:1313/converting-between-pixels-meters-and-map-coordinates-in-windows-phone/" class="post-title">Converting between pixels, meters and map coordinates in Windows Phone</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">Igor Kulman</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-Windows Phone" href="http://localhost:1313//categories/windows-phone">Windows Phone</a><a class="post-category post-category-WinRT" href="http://localhost:1313//categories/winrt">WinRT</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>In my current project I needed to solve one quite interesting problem. Imagine you have a map with some pins representing points of interest. If the user taps on a pin, a label with the place title is shown like on this image (that is not from the real project, obviously).</p>

<p><img src="/images/image_thumb_4_4.png" alt="" class="pure-img" ></p>

<p>The client had an interesting requirement. When the user taps the pin and the label is shown, they wanted the label to be centered on the map (basically move the map so the label appears in the middle of the map).</p>

<p>In Windows Phone you can only center the map to a GeoCoordinate. If you center the map to the tapped pin&#8217;s coordinate, it is not quite right, you also need to move it by half the width of the label to the left (and half of the height down). So the solution consists of two steps</p>

<ol>
<li>Convert half of the label width in pixels to meters for a given zoom level (pixels -&gt; meters conversion)</li>
<li>Subtract the result from the pin&#8217;s coordinate (meters -&gt; degrees conversion)</li>
</ol>

<p>(and the same for height)</p>

<p>The map component in Windows Phone 8 and 8.1 has quite a <a href="http://msdn.microsoft.com/en-us/library/aa940990.aspx">nice documentation</a>, so the first step requires some math but is not so difficult.</p>

<p>I created two helper functions to take care of this first conversion</p>

<script src="https://gist.github.com/igorkulman/9fa0a229b9c2db57a172.js?file=meters.cs"></script>

<p>The second conversion is more difficult, especially if you want to do it really well. I found a <a href="https://gis.stackexchange.com/questions/2951/algorithm-for-offsetting-a-latitude-longitude-by-some-amount-of-meters">simple solution that works quite ok when you are not right at the poles</a> and used it. The helper function looks like this.</p>

<script src="https://gist.github.com/igorkulman/9fa0a229b9c2db57a172.js?file=coords.cs"></script>

<p>Now you just need to put it all together and you are done.</p>

                    </div>
                </section>
                
            </div>
            
<div class="pagination">
  <nav role="pagination" class="post-list-pagination">
      
      <a href="/categories/windows-phone/" class="post-list-pagination-item pure-button post-list-pagination-item-prev">
        <i class="fa fa-angle-double-left"></i>&nbsp;Newer
      </a>
      
    <span class="post-list-pagination-item post-list-pagination-item-current">Page 2 of 5</span>
    
      <a href="/categories/windows-phone/page/3/" class="post-list-pagination-item pure-button post-list-pagination-item-next">
        Older&nbsp;<i class="fa fa-angle-double-right"></i>
      </a>
    
  </nav>
</div>


            <div class="footer">
    <div class="pure-menu pure-menu-horizontal pure-menu-open">
        <ul>
            <li>Powered by <a class="hugo" href="http://hugo.spf13.com/" target="_blank">hugo</a></li>
        </ul>
    </div>
</div>
<script src="http://localhost:1313//js/all.min.js"></script>
        </div>
    </div>
</div>

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-49528577-2', 'auto');
ga('send', 'pageview');

</script>

<script data-no-instant>document.write('<script src="http://'
        + (location.host || 'localhost').split(':')[0]
		+ ':1313/livereload.js?mindelay=10"></'
        + 'script>')</script></body>
</html>
