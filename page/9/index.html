<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coding Journal &middot; Coding Journal</title>

    <meta name="description" content="Adventures in the world of C#, F# and WinRT">

    <meta name="generator" content="Hugo 0.14" />
    <meta name="twitter:card" content="summary">
    
    <meta name="twitter:title" content="Coding Journal &middot; Coding Journal">
    <meta name="twitter:description" content="Adventures in the world of C#, F# and WinRT">

    <meta property="og:type" content="article">
    <meta property="og:title" content="Coding Journal &middot; Coding Journal">
    <meta property="og:description" content="Adventures in the world of C#, F# and WinRT">

    <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700|Oxygen:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/pure-min.css">
    <!--[if lte IE 8]>
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-old-ie-min.css">
    <![endif]-->
    <!--[if gt IE 8]><!-->
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-min.css">
    <!--<![endif]-->

    <link rel="stylesheet" href="http://igorkulman.github.io/coding-journal/css/all.min.css">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">

    <link rel="alternate" type="application/rss+xml" title="Coding Journal" href="http://igorkulman.github.io/coding-journal/index.xml" />
</head>
<body>


<div id="layout" class="pure-g">
    <div class="sidebar pure-u-1 pure-u-md-1-4">
    <div class="header">
        <hgroup>
            <h1 class="brand-title"><a href="http://igorkulman.github.io/coding-journal">Coding Journal</a></h1>
            <h2 class="brand-tagline"> Adventures in the world of C#, F# and WinRT </h2>
        </hgroup>

        <nav class="nav">
            <ul class="nav-list">
                
                <li class="nav-item">
                    <a class="pure-button" href="https://twitter.com/igorkulman"><i class="fa fa-twitter"></i> Twitter</a>
                </li>
                
                
                <li class="nav-item">
                    <a class="pure-button" href="https://github.com/igorkulman "><i class="fa fa-github-alt"></i> github</a>
                </li>
                
                <li class="nav-item">
                    <a class="pure-button" href="http://igorkulman.github.io/coding-journal/index.xml"><i class="fa fa-rss"></i> rss</a>
                </li>
            </ul>
        </nav>

<div>
<h2>About me</h2>

<p>Igor Kulman is currently working as Windows Phone developer, also building applications for Microsoft Azure and playing with F#.</p>
<p>
Interested in programming languages, functional programming and data science.</p>

</div>

    </div>
</div>


    <div class="content pure-u-1 pure-u-md-3-4">
        <div>
            
            <div class="posts">
                
                <h1 class="content-subhead">22 Nov 2012, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://igorkulman.github.io/coding-journal/converting-hex-color-to-solidcolorbrush/" class="post-title">Converting HEX color to SolidColorBrush</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">Igor Kulman</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-WinRT" href="http://igorkulman.github.io/coding-journal/categories/winrt">WinRT</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>XAML supports stating color definitions as hexa strings (starting with #) but there is no built-in way to do it in C#, you must write your own method to do it, that might look like this</p>

<p><script src="https://gist.github.com/5849452.js"></script></p>

                    </div>
                </section>
                
                <h1 class="content-subhead">20 Nov 2012, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://igorkulman.github.io/coding-journal/loading-xaml-components-at-runtime/" class="post-title">Loading XAML components at runtime</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">Igor Kulman</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-WinRT" href="http://igorkulman.github.io/coding-journal/categories/winrt">WinRT</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>When I had to create a library to generate UI elements with animated image Ads I found out that creating complicated UI elements in code with bindings is not as easy as doing the same in XAML. A better way is to create your UI elements and bindings in a XAML file (if they are not very dynamic of course), load the XAML at runtime, parse it and set its DataContext.</p>

<p>First you need to read the XAML file. You can use the standard API with Windows.ApplicationModel.Package.Current.InstalledLocation as the folder. The XAML file must be set to Build=Content in your project</p>

<p><script src="https://gist.github.com/5849482.js"></script></p>

<p>Once you have the XAML read as string, you can use the XamlReader and cast it to a DependencyObject.</p>

<p><script src="https://gist.github.com/5849490.js"></script></p>

<p>or a more concrete class like UserControl if you know what the file contains.</p>

                    </div>
                </section>
                
                <h1 class="content-subhead">15 Nov 2012, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://igorkulman.github.io/coding-journal/computing-hashes-in-winrt/" class="post-title">Computing hashes in WinRT</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">Igor Kulman</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-WinRT" href="http://igorkulman.github.io/coding-journal/categories/winrt">WinRT</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>If you ever generated a MD5 or SHA hash in C# you problaby uset the classes from the System.Security.Cryptography namespace. This namespace is not available in WinRT, you have to use the Windows.Security.Cryptography.Core instead. This namespace contians a class called HashAlgorithmProvider that can be used to generate hashes using MD5 and SHA (SHA1, SHA256, SHA384, SHA512). A simple method to generate a hash for a string using a given algorithm may look like this</p>

<p><script src="https://gist.github.com/5849454.js"></script></p>

<p>Specifing the algoritm by its string name is not a good idea in my opinion, although you can use the names from the HashAlgorithmNames class. I would rather make the GetHash method private and create public method for all the algorithms</p>

<p><script src="https://gist.github.com/5849455.js"></script></p>

                    </div>
                </section>
                
                <h1 class="content-subhead">13 Nov 2012, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://igorkulman.github.io/coding-journal/tampering-with-windows-store-apps-data/" class="post-title">Tampering with Windows Store apps data</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">Igor Kulman</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-WinRT" href="http://igorkulman.github.io/coding-journal/categories/winrt">WinRT</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>Windows Store apps run in a sandbox with their data isolated from each other. So how secure is this storage from tampering by the user? It turns out not much.</p>

<p>The only Windows Store app I use on my work notebook is WeatherFlow because of the live tile. The app allows you to add your city and view weather forecast for it. But there is now way to get rid of the default cities like New York, Tokyo, etc. that are in the app when you first run it. This realy annoyed me so I started to poke around.</p>

<p>Using the debugger and checking the value of ApplicationData.Current.LocalFolder I found out that all the data of Windows Store apps are stored in AppData\Local\Packages in your profile (for me it is C:\Users\Igor\AppData\Local\Packages). The name of the directory for the app you are lookin for usualy contain its name, it is 08C8076A.WeatherFlow_gyyqpbm0tqk6g for WeatherFlow. The directory for each app contains a few subdirectories</p>

<p>AC</p>

<p>LocalState</p>

<p>RoamingState</p>

<p>Settings</p>

<p>SystemAppData</p>

<p>TempState</p>

<p>The important directories are LocalState and RoamingState representing the local and roaming folder, where each application can store its files. WeatherFlow uses only LocalState where it stores one data.json file with its configuration. You can edit the file and remove the unwanted city, then run the application again and it still works, with the changes you made.</p>

<p>Now imaging editing files of a game, giving yourself gold coins or armor, or copying files somewhere else, sharing &#8230; If you want the data of your Windows Store app to be secured, you have to do it by yourself.</p>

                    </div>
                </section>
                
                <h1 class="content-subhead">08 Nov 2012, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://igorkulman.github.io/coding-journal/how-to-uniquely-identify-a-windows-8-device/" class="post-title">How to uniquely identify a Windows 8 device</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">Igor Kulman</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-WinRT" href="http://igorkulman.github.io/coding-journal/categories/winrt">WinRT</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>When developing a Windows 8 app you may need to uniquely identify the device the app runs on. One reason may be the implementation of in-app purchases.</p>

<p>The Windows.System.Profile namespace contains HardwareToken that you can get by calling HardwareIdentification.GetPackageSpecificToken(null)</p>

<p><script src="https://gist.github.com/5849503.js"></script></p>

<p>This class contains a bunch of interesting fields</p>

<p><script src="https://gist.github.com/5849507.js"></script></p>

<p>All of these fields are of type Windows.Storage.Stream.Ibuffer, therefore COM calls. To use a value useable with .NET you have to use the DataReader, I get the unique device identifier from the hardwareId</p>

<p><script src="https://gist.github.com/5849511.js"></script></p>

<p>The resulting byte array can be converted to an UTF8 string</p>

<p><script src="https://gist.github.com/5849513.js"></script></p>

<p>I prefer concatenating the bytes to a string</p>

<p><script src="https://gist.github.com/5849515.js"></script></p>

<p><strong>Update:</strong> The hardware token of a device can change with hardware changes. Even small hardware changes like disabling Bluetooth can change the hardware token. You should generate it just once and save it.</p>

                    </div>
                </section>
                
                <h1 class="content-subhead">06 Nov 2012, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://igorkulman.github.io/coding-journal/being-a-polyglot-programmer/" class="post-title">Being a polyglot programmer</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">Igor Kulman</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-Programming in general" href="http://igorkulman.github.io/coding-journal/categories/programming-in-general">Programming in general</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>Many programmers learn one platform, one language and stay in their monoculture. Learning many different programming languages can definitely change your programming style and the way you think about problems. It was certainly beneficial for me, here is why.</p>

<p>After learning Pascal, C in the first semester at the University I started be commercial programming career as a PHP developer (part time in the second semester).  It was easy to start with and in demand so finding a part time job was easy. I never liked the language, it was not &#8220;pure&#8221;, I especially hated the function naming and parameters orders inconsistencies.</p>

<p>At the university I learned OOP principles and C++ and thought OOP was the answer to everything so I immediately changed my PHP programming style to incorporate it. My code became more readable and organized.  Later at the university I had to learn nonprocedural Prolog and functional Haskell. I found it very difficult because I had to think in another way and came out of my comfort zone. When I finished the course I really liked Haskell and functional programming because of its clarity, readability and the fact that I could write a very compact code. But I had no practical use for it. It did not change my Programming style but made me look for a more pure and &#8220;nicer&#8221; language to learn.</p>

<p>I found .NET and C# and was amazed by the tools for ASP.NET. Comparing to PHP creating websites in ASP.NET was easier, the programming language was more comfortable. I let PHP go and found a part time job as a .NET developer. Instead of ASP.NET I was hired for I programmed a Windows Mobile app in .NET Compact Framework. It was a great experience, I discovered threads and asynchronous programming. I took a C# course at the university and then worked a few months as a part time ASP.NET developer and discovered LINQ. LINQ was great and is one of the best (if not the best) features of .NET, it makes you write compact and clear code and lets you to an extent think functional (ideal for me as a Haskell fan). I began using LINQ extensively, my code and my programming style improved a lot.</p>

<p>I quickly got fed up with web development in ASP.NET, because it was not very challenging coding. I wanted to learn something new and do something more challenging. I found a part time job at Siemens that was partly analytical and partly programming and came to contact with Java. The only experience I had with Java before that was programming J2ME apps for my Siemens phone (strange coincidence).  Java felt strange, too much object oriented, no functional elements and without LINQ I felt like I was back in the stone age. But thanks to Java I discovered NoSQL databases, especially MongoDB. NoSQL databases changed my thinking about storing data, it was a great shift. They are a great fit for many project, you just need to realize that not everything must be force into a solid structure.</p>

<p>Quite recently I discovered F# and I was really thrilled. It let me program completely functional and at the same time interoperate with all the existing .NET code and libraries. It changed my programming style once again to be more functional and expressing. I try to do as much coding as possible in F# but is a real shame that Microsoft does not push it and it is still not equal to C#.</p>

<p>At the moment I am exploring Scala and Python through online courses at <a href="http://coursera.org">Coursera</a> and in the future I may take a look at Erlang. I strongly encourage you do the same, learn as many languages and as many programming paradigms as you can, it will widen your horizons and make you a better programmer. You do not even need to use these languages every day, your programming style will improve independently on the language you program.</p>

<p>Update: After some experiments with Scala I think it is a really ugly language, compared to say Haskell. I took a look at SML, Racker and Ruby and I quite liked all of them.</p>

                    </div>
                </section>
                
                <h1 class="content-subhead">01 Nov 2012, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://igorkulman.github.io/coding-journal/processing-json-in-net/" class="post-title">Processing JSON in .NET</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">Igor Kulman</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-WinRT" href="http://igorkulman.github.io/coding-journal/categories/winrt">WinRT</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>JSON is a very popular format for exchanging data, especially in the world of web technologies and JavaScript. The .NET platform contains a native support for this format but a better alternative is to use the JSON.NET library.</p>

<p><strong>JSON.NET</strong></p>

<p><a href="http://james.newtonking.com/projects/json-net.aspx">JSON.NET</a> is a flexible JSON serializer for .NET with LIQN support. The biggest reason for using this library is its performance in comparison to the standard DataContractJsonSerializer. The easiest way to use the library is to use the <a href="https://nuget.org/packages/Newtonsoft.Json">Nuget package</a>.</p>

<p>JSON.NET is very easy to use; first you create a JObject instance</p>

<p><script src="https://gist.github.com/5857544.js"></script></p>

<p>from which you can get a collection (in our example of type TicketViewModel)</p>

<p><script src="https://gist.github.com/5857549.js"></script></p>

<p>filling the TicketViewModel instance from the JObject</p>

<p><script src="https://gist.github.com/5857554.js"></script></p>

<p><strong>DataContractJsonSerializer</strong></p>

<p>If you do not want or cannot use JSON.NET you can use the already mentioned DataContractJsonSerializer. Before you use it, you have to create a class with the same structure as the JSON. You do not have to create it by hand; you can use the <a href="http://json2csharp.com/">json2csharp</a> utility.</p>

<p>Using the DataContractJsonSerializer is a less readable than using JSON.NET</p>

<p><script src="https://gist.github.com/5857558.js"></script></p>

                    </div>
                </section>
                
                <h1 class="content-subhead">30 Oct 2012, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://igorkulman.github.io/coding-journal/using-different-data-templates-with-gridview-in-windows-8-apps/" class="post-title">Using different data templates with GridView in Windows 8 apps</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">Igor Kulman</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-WinRT" href="http://igorkulman.github.io/coding-journal/categories/winrt">WinRT</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>GridView and ListView are the two of the most commonly used components in Windows 8 apps. Items in these two components are displayed according to the DataTemplate give as the ItemTemplate property. If you do not want to display all the items the same way, you need to use a custom ItemTemplateSelector.</p>

<p>Using ItemTemplateSelector in Windows 8 apps is easier and more straightforward that in Windows Phone 7 (I wrote about that <a href="http://www.kulman.sk/sk/content/wp7-ako-zobrazovat-objekty-roznych-typov-v-listboxe">here in Slovak</a>). All you need to do is to create a class inheriting from the DataTemplateSelector and set the ItemTemplateSelector property of GridView (or ListView) to this new class.</p>

<p>When inheriting from the DataTemplateSelector you need to override the SelectTemplateCore method. In this method you have accees to the binded item and and you can use it to decide which DataTemplate to return. You can define your DataTemplates in the App.xaml and access them via the Application.Current.Resources array with casting, but that is a bad habbit. A better solution would be to define public DataTemplate properties in your class and assign them in XAML.</p>

<p>A custom DataTemplateSelector class may look like this</p>

<p><script src="https://gist.github.com/5849469.js"></script></p>

<p>This class chooses one of two DataTemplates (MagazineTemplate, BigMagazineTemplate) according to the item&#8217;s IsTop boolean property.</p>

<p>In your XAML, first declare the MainGridTemplateSelector and set the DataTemplate properties class</p>

<p><script src="https://gist.github.com/5849474.js"></script></p>

<p>Where MagazineTemplate and BigMagazineTemplate are DataTemplates defined in your XAML. Then simply set the ItemTemplateSelector property of the GridView (ListView)</p>

<p><script src="https://gist.github.com/5849477.js"></script></p>

                    </div>
                </section>
                
                <h1 class="content-subhead">26 Oct 2012, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://igorkulman.github.io/coding-journal/fast-way-to-check-if-a-file-exists-in-winrt/" class="post-title">Fast way to check if a file exists in WinRT</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">Igor Kulman</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-WinRT" href="http://igorkulman.github.io/coding-journal/categories/winrt">WinRT</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>The StorageFolder class does not containt any method to determine if a file with given name exists in that folder. There are at least two ways how to implement such method, let us call it ContainsFileAsync.</p>

<p>The first method could take advantage of the GetFilesAsync method that returns a readonly list of all the files in a folder as StorageFile objects. The StorageFile contains a property called Name that you could compare with the given filename. The whole code would look like this</p>

<p><script src="https://gist.github.com/5849495.js"></script></p>

<p>This method looks fairly simple, elegant and works if the folder contains only a few files. When the folder contains tens or hundreds of files, this method gets very slow. In a folder with approximately 100 files the method takes about 1.5 seconds to return the result.</p>

<p>There is faster way, that works in constant time (about 50ms) even in folders with hundred files, but it is not so elegant. The idea is simple, try to access the files and if you get an exception, just return false.</p>

<p><script src="https://gist.github.com/5849500.js"></script></p>

<p>Although I am a big fan of elegance and readability when coding, I prefer and use the second method.</p>

                    </div>
                </section>
                
                <h1 class="content-subhead">26 Oct 2012, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://igorkulman.github.io/coding-journal/updating-azure-toolkit-is-always-a-pain/" class="post-title">Updating Azure Toolkit is always a pain</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">Igor Kulman</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-Windows Azure" href="http://igorkulman.github.io/coding-journal/categories/windows-azure">Windows Azure</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>From time to time I need to develop or maintain a small Windows Azure project. This time I wanted to create the whole project in F#. The first thing I needed to to was to update the Azure toolkit 1.8 (October 2012) but updating Azure Toolkit is always a pain. I started Web Platform Installer, selected Azure Toolkit 1.8, Azure Tools 1.8 for VS2012 and installed everything including the dependencies. What was the result? The whole Azure integration in Visual Studio 2012 stopped working. The Azure templates completely disappeared and Visual Studio only offered me downloading the Azure Toolkit, which failed, because it was already installed. I ended up completely uninstalling everything with the name containing Azure and installing the Azure toolkit again using the link from Visual Studio.</p>

<p>Why cannot this work better?</p>

                    </div>
                </section>
                
            </div>
            
<div class="pagination">
  <nav role="pagination" class="post-list-pagination">
      
      <a href="/page/8/" class="post-list-pagination-item pure-button post-list-pagination-item-prev">
        <i class="fa fa-angle-double-left"></i>&nbsp;Newer
      </a>
      
    <span class="post-list-pagination-item post-list-pagination-item-current">Page 9 of 10</span>
    
      <a href="/page/10/" class="post-list-pagination-item pure-button post-list-pagination-item-next">
        Older&nbsp;<i class="fa fa-angle-double-right"></i>
      </a>
    
  </nav>
</div>


            <div class="footer">
    <div class="pure-menu pure-menu-horizontal pure-menu-open">
        <ul>
            <li>Powered by <a class="hugo" href="http://hugo.spf13.com/" target="_blank">hugo</a></li>
        </ul>
    </div>
</div>
<script src="http://igorkulman.github.io/coding-journal/js/all.min.js"></script>
        </div>
    </div>
</div>


<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-49528577-2', 'auto');
ga('send', 'pageview');

</script>

</body>
</html>
