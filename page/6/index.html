<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coding Journal &middot; Coding Journal</title>

    <meta name="description" content="Adventures in the world of C#, F# and WinRT">

    <meta name="generator" content="Hugo 0.14" />
    <meta name="twitter:card" content="summary">
    
    <meta name="twitter:title" content="Coding Journal &middot; Coding Journal">
    <meta name="twitter:description" content="Adventures in the world of C#, F# and WinRT">

    <meta property="og:type" content="article">
    <meta property="og:title" content="Coding Journal &middot; Coding Journal">
    <meta property="og:description" content="Adventures in the world of C#, F# and WinRT">

    <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700|Oxygen:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/pure-min.css">
    <!--[if lte IE 8]>
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-old-ie-min.css">
    <![endif]-->
    <!--[if gt IE 8]><!-->
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-min.css">
    <!--<![endif]-->

    <link rel="stylesheet" href="https://github.com:1313/igorkulman/coding-journal//css/all.min.css">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">

    <link rel="alternate" type="application/rss+xml" title="Coding Journal" href="https://github.com:1313/igorkulman/coding-journal//index.xml" />
</head>
<body>


<div id="layout" class="pure-g">
    <div class="sidebar pure-u-1 pure-u-md-1-4">
    <div class="header">
        <hgroup>
            <h1 class="brand-title"><a href="https://github.com:1313/igorkulman/coding-journal/">Coding Journal</a></h1>
            <h2 class="brand-tagline"> Adventures in the world of C#, F# and WinRT </h2>
        </hgroup>

        <nav class="nav">
            <ul class="nav-list">
                
                <li class="nav-item">
                    <a class="pure-button" href="https://twitter.com/igorkulman"><i class="fa fa-twitter"></i> Twitter</a>
                </li>
                
                
                <li class="nav-item">
                    <a class="pure-button" href="https://github.com/igorkulman "><i class="fa fa-github-alt"></i> github</a>
                </li>
                
                <li class="nav-item">
                    <a class="pure-button" href="https://github.com:1313/igorkulman/coding-journal//index.xml"><i class="fa fa-rss"></i> rss</a>
                </li>
            </ul>
        </nav>

<div>
<h2>About me</h2>

<p>Igor Kulman is currently working as Windows Phone developer, also building applications for Microsoft Azure and playing with F#.</p>
<p>
Interested in programming languages, functional programming and data science.</p>

</div>

    </div>
</div>


    <div class="content pure-u-1 pure-u-md-3-4">
        <div>
            
            <div class="posts">
                
                <h1 class="content-subhead">30 Jul 2013, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="https://github.com:1313/igorkulman/coding-journal/developing-windows-store-apps-with-caliburn-micro-part-1-setup-and-first-view/" class="post-title">Developing Windows Store apps with Caliburn Micro Part 1: setup and first view</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">Igor Kulman</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-WinRT" href="https://github.com:1313/igorkulman/coding-journal//categories/winrt">WinRT</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>I have been developing Windows Store apps for some time. I have always used MVVM, but mostly &#8220;my own&#8221; MVVM. I have finally decided to use a &#8220;real&#8221; MVVM framework and I have chosen Caliburn Micro, because I did not like MVVM very much. In this article I am going to show you how to use Caliburn Micro, Unity and Fody to develop Windows Store apps.</p>

<p><strong>Caliburn Micro</strong></p>

<p><a href="https://caliburnmicro.codeplex.com/">Caliburn Micro</a> is a small, yet powerful framework, designed for building applications across all Xaml Platforms. With strong support for MVVM and other proven UI patterns, Caliburn.Micro will enable you to build your solution quickly, without the need to sacrifice code quality or testability.</p>

<p><strong>Unity</strong></p>

<p>When I started with Calibun Micro I discovered an <a href="http://nybbles.blogspot.cz/2013/02/winrt-caliburnmicro-and-ioc-part-3.html">article by Thomas Baker about using Unity as DI container with Caliburn Micro</a>. His article also contains code that makes it easy for you to save and load state when the app gets suspended. With his permission, I have <a href="https://nuget.org/packages/Caliburn.Micro.Unity.WinRT/">created a Nuget package</a> from his code, this article is going to use this package.</p>

<p><strong>Fody</strong></p>

<p>I have been using <a href="https://github.com/Fody/Fody">Fody</a> with Windows Phone and Windows Store apps for some time now. I especially use the <a href="https://github.com/Fody/PropertyChanged">INotifyPropertyChanged weaver</a> I <a href="http://blog.kulman.sk/inotifypropertychanged-the-easy-way-in-windows-phone-and-windows-8/" title="INotifyPropertyChanged the easy way in Windows Phone and Windows 8">wrote about earlier</a>. Check the article for more information if you are not already familliar with Fody.</p>

<p><strong>Application setup</strong></p>

<p>Let&#8217;s start buidling a simple demo application. This demo application will show you how little code you need to write to get something done when using the mentioned libraries.</p>

<p>Create a Blank App. Add the <a href="http://www.nuget.org/packages/Caliburn.Micro.Unity.WinRT/">Caliburn.Micro.Unity.WinRT</a> package from Nuget. It will install all the dependencies you need. Install <a href="http://www.nuget.org/packages/PropertyChanged.Fody/">PropertyChanged.Fody</a> from Nuget. Next you need to hook up PropertyChanged.Fody with Fody. Open FodyWeavers.xml and change it to</p>

<p><script src="https://gist.github.com/6088620.js"></script></p>

<p>PropertyChanged.Fody now knows that it should call the NotifyOfPropertyChange method from Caliburn Micro when a property gets changed. Let&#8217;s do some cleanup next. Delete MainPage.xaml, rename the Common folder to Resources and create a few additional folders:</p>

<ul>
<li>Views</li>
<li>ViewModels</li>
<li>Data</li>
<li>Converters</li>
<li>Services</li>
<li>Code</li>
</ul>

<p>Next make you app inherit from CaliburnUnityApplication by changing App.xaml to</p>

<p><script src="https://gist.github.com/6088861.js"></script></p>

<p>and cleaning up and changing App.xaml.cs to</p>

<p><script src="https://gist.github.com/6088871.js"></script></p>

<p><strong>First ViewModel</strong></p>

<p>Now you can create your first ViewModel and your first View. Caliburn Micro uses a naming convention to pair a ViewModel and a View. Create a new class called MainViewModel in the ViewModels folder. Make the class inherit from ViewModelBase and implement the default constructor:</p>

<p>create a new string property called Title. Add the ImplementPropertyChanged attribute to the class. This makes NotifyPropertyChanged.Fody call the NotifyOfPropertyChange whenever any of the properties (just Title for now) changes. Assing some text to the Title property in the constructor:</p>

<p><script src="https://gist.github.com/6088988.js"></script></p>

<p><strong>First View</strong></p>

<p>Now create a view for the MainViewModel as a Blank Page. According to the naming conventions, it needs to be called MainView and created in the Views folder. Add a TextBlock to the View. To bind the text of this TextBlock to the Title property, you could use Text=&#8221;{Binding Title}&#8221;. This works just fine but you do not have to do it. Just name the TextBlock the same as the property you want it to bind to (in our case Title):</p>

<p><script src="https://gist.github.com/6089012.js"></script></p>

<p><strong>Navigating to the view</strong></p>

<p>There is only one more thing left to do. You need to tell the framework to navigate to the MainView when the app starts. This is done in the OnLaunched method in App.xaml.cs</p>

<p><script src="https://gist.github.com/6089032.js"></script></p>

<p><strong>Run you app</strong></p>

<p>Hit F5 and you will see your app start, navigate to MainView and show the text from the Title property in this view.</p>

<p>You can find the <a href="https://github.com/igorkulman/CaliburnDemoWinRT">code on Github</a> and stay tuned for Part 2!</p>

                    </div>
                </section>
                
                <h1 class="content-subhead">24 Jul 2013, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="https://github.com:1313/igorkulman/coding-journal/intercepting-methods-with-ninject-for-error-logging/" class="post-title">Intercepting methods with Ninject for error logging</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">Igor Kulman</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-Windows Azure" href="https://github.com:1313/igorkulman/coding-journal//categories/windows-azure">Windows Azure</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>I am currently working on a fairly large Windows Azure projects that among other things conatins a Web Role where I use <a href="http://www.ninject.org/">Ninject</a> as a dependency container. As the business logic library grew larger I found myself writing a lot of repeating boiler plate code to log exceptions in many important methods. I wantet to remove all the boiler plate code and create a custom attribute, say LogErrorAttribute with one simple goal: each method decorated woth this attribute should log info about any occuring exception.</p>

<p><strong>IL weaving?</strong></p>

<p>I have been using <a href="https://github.com/Fody/Fody">Fody</a> for some time to <a href="http://blog.kulman.sk/inotifypropertychanged-the-easy-way-in-windows-phone-and-windows-8/" title="INotifyPropertyChanged the easy way in Windows Phone and Windows 8">implement the INotifyPropertyChanged calls for me in Windows Phone and Windows 8 projects</a> so it was my first choice.</p>

<p>There is a <a href="https://github.com/Fody/MethodDecorator">Fody.MethodDecorator</a> extensions that allows you to execute your code on a methods start, exit and exception. Writing the exception to Console is trivial, but I wanted to use a implementation of my custom ILogFactory.</p>

<p>There was no way to inject a ILogFactory implementation into the InterceptorAttribute. The only way that could work would be to use a ServiceLocator and I did not want to do it.</p>

<p><strong>Dynamic proxy!</strong></p>

<p>I came across <a href="http://www.castleproject.org/projects/dynamicproxy/">Castle Dynamic Proxy</a> and realized that there are Ninject extensions that allow you to easily use it.</p>

<p>First you need to install <a href="http://www.nuget.org/packages/Ninject.Extensions.Interception/3.0.0.8">Ninject.Extensions.Interception</a>. It has no depedencies other that Ninject, but you also have to install <a href="http://www.nuget.org/packages/Ninject.Extensions.Interception.DynamicProxy/3.0.0.8">Ninject.Extensions.Interception.DynamicProxy</a> (and <a href="http://www.nuget.org/packages/Castle.Core/">Castle.Core</a> as a dependency) otherwise it will not work.</p>

<p>First, create a class implementing the IInterceptor interface</p>

<p><script src="https://gist.github.com/6045777.js"></script></p>

<p>This class wraps the intercepted method invocation into a try..catch block and logs any occuring exception using my custom ILogFactory, including parameter values.</p>

<p>Next, create a class implementing the InterceptAttribute</p>

<p><script src="https://gist.github.com/6045812.js"></script></p>

<p>This attribute uses the Ninject kernel to get an instance of the ErrorLoggingInterceptor so you do not have to concern yourself explictily with providing an ILogFactory implementation, Ninject will do all the work.</p>

<p>Now you can use the LogErrorAttribute to mark any method, but keep in mind that all the marked methods must be virtual</p>

<p><script src="https://gist.github.com/6045825.js"></script></p>

                    </div>
                </section>
                
                <h1 class="content-subhead">16 Jul 2013, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="https://github.com:1313/igorkulman/coding-journal/why-you-should-not-use-windows-store-for-in-app-purchases/" class="post-title">Why you should not use Windows Store for in-app purchases</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">Igor Kulman</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-WinRT" href="https://github.com:1313/igorkulman/coding-journal//categories/winrt">WinRT</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>I often wonder how can something as crucial as in-app purchases be so badly implemented in Windows Store. I really do not recommend anyone to use Windows Store&#8217;s built in in-app purchases. Use a third party provider or implement your own purchase mechanism, Microsoft is ok with that. You will be better of than using the built-in one. Here is why.</p>

<p><strong>Limited number of in-app purchases per app</strong></p>

<p>I previously wrote about the fact that <a href="http://blog.kulman.sk/windows-store-limits-the-number-of-in-app-purchases-for-an-app/">Windows Store limits the number of in-app purchases you can define for an app</a>. The current limit is 200. If you need more, say you sell a daily newspaper, you are out of luck and Windows Store&#8217;s in app-purchases are not for you.</p>

<p><strong>Complicated receipt validation outside of .NET</strong></p>

<p>If you use in-app purchases you surely want to validate them on your server, especially considering the very weak security that Windows 8 offers to Windows Store apps. If you are not using .NET on your server, there is no guide on how to do it. Microsoft only offers a code sample in C#, nothing else. Good luck finding a solution for say PHP, I could not find any.</p>

<p><strong>Half-baked purchases restoration</strong></p>

<p>If a user uninstalls your app and installs it again you typically do not want him to need to buy everything again. You need a way to restore the purchases. If you do not use server-side receipt validation, it is trivial, even more trivial than cracking your application and getting everything for free. If you use server-side receipt validation, things get complicated.</p>

<p>Restoring purchases is typically done in a very simple way. You request all the receipts from the app store and send them to your server for validation. The server then enables the bought items for the user. I would not be Windows Store if there were no catch.</p>

<p>The problem is that you can get the receipt just once, when the users makes the in-app purchase. There is no way to get the receipt at any later time. There is a method called <a href="http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.store.currentapp.getproductreceiptasync.aspx">GetProductReceiptAsync</a> but it throws an NotImplementedException. Looks like Microsoft did not really think that anyone would want to restore purchases in combination with server-side validation (Typical use-case in say AppStore).</p>

<p>The only way to implement this is storing all the receipts on the server and sending the server receipt ids when restoring purchases. You can get the receipt ids from <a href="http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.store.currentapp.getappreceiptasync.aspx">GetAppReceiptAsync</a> after some XML parsing. Just make sure the receipt gets to the server after the purchase, because there is no way to get it again.</p>

<p><strong>No sandbox for testing</strong></p>

<p>You cannot do any &#8220;real&#8221; testing with Windows Store. It does not provide any sanbox. The only way to test the in-app purchases is to use the primitive <a href="http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.store.currentappsimulator">CurrentAppSimulator</a> that can basically just simulate if the users cliked ok or cancel in the buy dialog or if there was an error. You cannot use it to test you server-side receipt validation.</p>

<p>There is no way to &#8220;pair&#8221; your app running form Visual Studio to you app defined in Windows Store for testing purposes. You really need to trust your implementation and you can test it only after the app is published and live in Windows Store.</p>

                    </div>
                </section>
                
                <h1 class="content-subhead">12 Jun 2013, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="https://github.com:1313/igorkulman/coding-journal/windows-phone-run-background-agent-every-minute/" class="post-title">Windows Phone: run background agent every minute</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">Igor Kulman</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-Windows Phone" href="https://github.com:1313/igorkulman/coding-journal//categories/windows-phone">Windows Phone</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>In both Windows Phone 7 and Windows Phone 8 the background agent is executed approximately every 30 minutes. If you want to run your code more often, for example to create an app showing actual time on the live tile, you are out of luck. Are you?</p>

<p>You can use <a href="http://msdn.microsoft.com/en-US/library/windowsphone/develop/microsoft.phone.scheduler.scheduledactionservice.launchfortest(v=vs.105).aspx">ScheduledActionService.LaunchForTest</a> to test your background agent without waiting 30 minutes for the system to run it. What if you use this method in the OnInvoke method of your background agent?</p>

<p><script src="https://gist.github.com/5849356.js"></script></p>

<p>Your background agent gets executed every minute! I <a href="http://blog.kulman.sk/wp-content/uploads/2013/06/CSWP7ScheduledTaskAgent.zip">created a simple demo</a> so you can see for yourself.</p>

<p>I wonder if this code would pass certification. Has anyone tried to use it?</p>

<p><strong>Update:</strong> it will <strong>not</strong> work, see <a href="http://blog.mjfnet.com/2013/01/10/windows-phone-dont-call-launchfortest-in-release/">Windows Phone: Don’t call LaunchForTest in Release</a>.</p>

                    </div>
                </section>
                
                <h1 class="content-subhead">06 Jun 2013, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="https://github.com:1313/igorkulman/coding-journal/inotifypropertychanged-the-easy-way-in-windows-phone-and-windows-8/" class="post-title">INotifyPropertyChanged the easy way in Windows Phone and Windows 8</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">Igor Kulman</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-Windows Phone" href="https://github.com:1313/igorkulman/coding-journal//categories/windows-phone">Windows Phone</a><a class="post-category post-category-WinRT" href="https://github.com:1313/igorkulman/coding-journal//categories/winrt">WinRT</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>If you develop Windows Phone, Windows 8, Silverlight or WPF apps using the MVVM pattern, you are familiar with the INotifyPropertyChanged interface.</p>

<p><strong>Typical implementation</strong></p>

<p>In a typical implementation, you usually have a base class implementing the interface, like</p>

<p><script src="https://gist.github.com/5849361.js"></script></p>

<p>or use a framework like MVVMLight, Prism or Caliburn Micro that provides such base class for you. In your view models you have properties using the PropertyChanged method</p>

<p><script src="https://gist.github.com/5849364.js"></script></p>

<p>You do not need to create such properties by hand, you can <a href="http://www.kulman.sk/data/down/propn.snippet">use a snippet</a>, but it is still a lot of code to do such a simple thing.</p>

<p><strong>Meet Fody</strong></p>

<p><a href="https://github.com/Fody/Fody">Fody</a> is an assembly weaver for .NET that plugs to the build process of your project and modifies the IL of your assemblies according to your needs. It supports .net 3.5, .net 4, .net 4.5, Silverlight 4, Silverlight 5, Windows Phone 7, Windows Phone 8, Metro on Windows 8, Mono, MonoTouch, MonoDroid and PCL. No installation or configuration is required, you just need to install the <a href="http://nuget.org/packages/Fody/">Fody Nuget package</a>.</p>

<p><strong>INotifyPropertyChanged using Fody (80% of the time)</strong></p>

<p>Fody has a <a href="https://github.com/Fody/PropertyChanged">PropertyChanged addin</a> that does all the INotifyPropertyChanged plumbing for you. If you want the same behavior as in my typical implementation example, there is no need for a base class. Install the <a href="https://github.com/Fody/PropertyChanged">PropertyChanged.Fody Nuget package</a>, decorate your view model class with the ImplementPropertyChanged attribute and use just basic properties</p>

<p><script src="https://gist.github.com/5849367.js"></script></p>

<p>That is it. Less code, the same behaviour. You can verify it with tools like <a href="http://www.telerik.com/justdecompile.aspx">Telerik JustDecompile</a>.</p>

<p><strong>The remaining 20%</strong></p>

<p>Fody does all the plumbing for you. It even knows that the FullName property uses FirstName and Surname and raises the PropertyChanged event for it when any og the two properties changes. The PropertyChanged.Fody addin <a href="https://github.com/Fody/PropertyChanged/wiki/Attributes">contains attributes</a>, that you can use to define dependencies</p>

<p><script src="https://gist.github.com/5849371.js"></script></p>

<p>or to raise the PropertyChanged event for any other property</p>

<p><script src="https://gist.github.com/5849373.js"></script></p>

<p>Sometimes you want to execute some additional code in the setter. Fody allows it, just create a method with the <a href="https://github.com/Fody/PropertyChanged/wiki/On_PropertyName_Changed">name On_PropertyName_Changed</a></p>

<p><script src="https://gist.github.com/5849376.js"></script></p>

<p>If you use a framework and you want to raise the PropertyChanged event through a method of this framework, it is not a problem. You just need to <a href="https://github.com/Fody/PropertyChanged/wiki/Options">set the EventInvokerNames options</a>. The Fody <a href="https://github.com/Fody/PropertyChanged/wiki/SupportedToolkits">documentation even describes what to set for some of the frameworks</a> so you do not have to figure it out for yourself.</p>

                    </div>
                </section>
                
                <h1 class="content-subhead">05 Jun 2013, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="https://github.com:1313/igorkulman/coding-journal/beware-of-removing-localizations-from-your-windows-phone-apps/" class="post-title">Beware of removing localizations from your Windows Phone apps</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">Igor Kulman</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-Windows Phone" href="https://github.com:1313/igorkulman/coding-journal//categories/windows-phone">Windows Phone</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>When I released version 2.0 of my app <a href="http://phototimeline.kulman.sk/">Photo Timeline</a>, some users reported updating problems. I finally found out what caused the problem and submited a new build to the Windows Phone store.</p>

<p>In my app I had three localizations: en-US (default), en and cs. I do not exactly remember why I had English twice as localization. I decided to remove the en localization thinking that nothing will break and that was a mistake.</p>

<p><strong>Once you add a localization to your app, never remove it!</strong> If you do so, all the users who use your app with that localization will have update problems.</p>

                    </div>
                </section>
                
                <h1 class="content-subhead">20 May 2013, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="https://github.com:1313/igorkulman/coding-journal/getting-paid-for-your-windows-phone-apps-is-a-real-pain/" class="post-title">Windows Phone Store and problems with payments</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">Igor Kulman</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-Windows Phone" href="https://github.com:1313/igorkulman/coding-journal//categories/windows-phone">Windows Phone</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>I have been a Windows Phone developer for over a year now and my paid apps made me some money. The small amount of money made is not interesting, more interesting is that getting the money from Microsoft has been a real pain. Maybe because I live <strong>outside the US</strong>, maybe it is a geographically independent problem. If you are a developer and live outside the US, I really want to hear your experience.</p>

<p><strong>No exact info about payment rules?</strong></p>

<p>First, there is no exact information about how often a developer gets paid. The <a href="http://msdn.microsoft.com/en-us/library/windowsphone/help/jj206722(v=vs.105).aspx">getting paid section</a> in the Windows Phone Dev Center only informs you about tax and bank info, that you need to provide to get paid. I remember that I once heard that developers get paid when their earnings get pass $200, but I was not able to get any official info about this. The first payment I got from Windows Phone Store was $52.50 and I know a developer with $900 earned and no money sent to him, so I guess the $200 limit is not true.</p>

<p>The <a href="http://msdn.microsoft.com/en-us/library/windows/apps/jj193593.aspx">$200 limit should be true for Windows Store</a>, but Windows Phone Store is a different store with different rules.</p>

<p><strong>No info about pending payments</strong></p>

<p>Suppose the $200 limit is true. (Windows Store states: &#8220;To get paid from the Windows Store, you must have at least $200 in app sales pending payment&#8221;) It would be really useful to know how much money your apps have made in total and from the last payout, or in other words, the pending payments. Microsoft does not provide such info. Even the support is not able (or willing) to tell you this info.</p>

<p>The only info you get is the number of paid downloads of your apps. You need to multiple this per-app numbers by the price of your apps and subtract the 30% cut that Microsoft keeps for themselves. If you changed the price of your apps at some point, or have different pricing for different countries, the math becomes really overwhelming.</p>

<p><strong>Distimo to the rescue?</strong></p>

<p><a href="http://www.distimo.com/">Distimo</a> is a great app analytics service that supports Windows Phone Store. You give it your credentials and it downloads and displays all the data from Windows Phone Store for you. And guess what, it can display the amount of money you made. I do not know how they do it. Maybe they use the exports that Windows Phone Store offers, but when I try to download them, they are always empty. Maybe they just do the math I mentioned&#8230; Anyway, it really sucks that you have to use a 3rd party tool to get the info that Microsoft has and should provide to a developer.</p>

<p><strong>Really getting paid</strong></p>

<p>Only my first payment of the strange $52.50 was automatic. When my next earnings according to my calculations crossed the limit of $200 (or $252.50 taking the $52.50 payment into account), I was expecting to get paid. The payment did not come for months. I asked my local Microsoft branch for more info, but I did not get any useful answers. So I tried another tactic.</p>

<p>I made a bit of a fuss about this issue on Twitter, where many developers from my country joined with their complaints about being in the same situation, mentioning our local Microsoft evangelist in their tweets. In two weeks, we all got our payments from Microsoft (coincidence?).</p>

<p>The payment did not come in $ but in CZK. Its value was approximately $240. The Windows Phone Store now shows me I received two payments in two different currencies and in some statistics adds the two payments up as they were both in CZK ($52.50 + 4,806.88 CZK = 4859.38 CZK in their world).</p>

<p><strong>Answers from Microsoft</strong></p>

<p>I contacted my local Microsoft branch and sent the following <strong>questions</strong>to two evangelists, hoping to get answers for me and other developers:</p>

<p>When does a developer get paid from Windows Phone Store? Is there any limit that needs to be crossed (like $200 in Windows Store)?</p>

<p>Are these getting paid rules officialy stated anywhere? The <a href="http://msdn.microsoft.com/en-us/library/windowsphone/help/jj206722(v=vs.105).aspx">MSDN page</a> does not contain any useful info.</p>

<p>Is there a way to know how much I have made in total / since last payout? I mean other way that doing the math from app downloads and prices. (A fellow developer told me that even your support does not know / want to give the info.)</p>

<p>Are payments automatic? (If there are exact rules)</p>

<p>To get my last payment I needed to contact out local MS branch, do I need to do it every time I feel I made $200 since my last payment (which is now)?</p>

<p>I got the following <strong>answers</strong> (after involving other developers and putting some pressure on them):</p>

<p>7b of the APA: Application Proceeds will be calculated on a monthly basis by deducting the Store Fee from Net Receipts for the applicable month. If total Application Proceeds payable to you for a month exceed USD$200 (or its equivalent in local currency), then Microsoft will remit payment to you in</p>

<p>accordance with this Section 7.</p>

<p>Can you clarify what you mean by rules? As long as a dev has over $200, and has valid bank &amp; tax, then they will be attempted in payout.</p>

<p>Currently we do not have a report that provides the total of the settled transactions for a developer.</p>

<p>Payments are automatically attempted once the developer reaches the threshold</p>

<p>No, payments are automatically attempted once the developer reaches the threshold</p>

<p><strong>Conclusion</strong></p>

<p>Microsoft confirmed the $200 limit for getting paid altough my experience does not corespond to this statement. I still wonder why this information is not available somewhere on AppHub or MSDN. They sent me a file called Windows-Phone-Store-Application-Provider-Agreement.pdf but I was not able to find any reference to it anywhere, just the whole file at a <a href="http://cmsresources.windowsphone.com/devcenter/en-us/legal/Windows-Phone-Store-Application-Provider-Agreement.pdf">strange url</a>. Having this crucial info hidden in a PDF file where no developer can ever find it does not seem ok to me. The whole payments process does not look very transparent.</p>

<p>They also confirmed that there is no way to know how much money you made, so you have to rely on Distimo. They assured me that my next payment will be automatic, so I guess I just have to wait and see &#8230;</p>

                    </div>
                </section>
                
                <h1 class="content-subhead">18 Apr 2013, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="https://github.com:1313/igorkulman/coding-journal/useful-tools-for-windows-store-developers/" class="post-title">Useful tools for Windows Store developers</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">Igor Kulman</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-Windows Phone" href="https://github.com:1313/igorkulman/coding-journal//categories/windows-phone">Windows Phone</a><a class="post-category post-category-WinRT" href="https://github.com:1313/igorkulman/coding-journal//categories/winrt">WinRT</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>I recently discovered two really neet tools that helped me with Windows Store app development.</p>

<p><strong>Windows Store Icon Maker</strong></p>

<p>When creating a Windows Store or Windows 8 apps, there are many icon sizes you have to provide. If you do nont wat to do all the resizing by yourself, you can use the <a href="https://github.com/DavidBurela/WindowsMarketplaceIconMaker">Windows Store Icon Maker</a>. It is a fork of the <a href="http://wpiconmaker.codeplex.com/">Windows Phone Icons Maker</a> with added support for Windows Store apps. It takes a 300x300px icon as input and outputs all the square icons you need.</p>

<p><strong>HAMMER.Pants</strong></p>

<p>To brand Windows Store apps written in XAML, you need to override all the control styles. This sucks if you just want to change the colours to match your theme. <a href="https://github.com/Code52/HAMMER">HAMMER.Pants</a> solves this, by auto-modifying all the coloured brushes so you don&#8217;t have to pick through them. Currently, you provide a &#8220;base&#8221; colour, and HAMMER.Pants modifies that based on the luminance variation found in the original styles. That is, if you pick red, all the purples will be replaced with reds, but they&#8217;ll change in brightness slightly just like the default purples do.</p>

                    </div>
                </section>
                
                <h1 class="content-subhead">15 Apr 2013, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="https://github.com:1313/igorkulman/coding-journal/do-you-need-to-create-a-special-windows-phone-8-build-of-your-windows-phone-app/" class="post-title">Do you need to create a special Windows Phone 8 build of your Windows Phone app?</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">Igor Kulman</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-Windows Phone" href="https://github.com:1313/igorkulman/coding-journal//categories/windows-phone">Windows Phone</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>If you create a Windows Phone app and you want it to be able to run on both Windows Phone 7 and Windows Phone 8, you target Windows Phone 7 and the app runs on Windows Phone 8 automatically. But is it really enough to create a Windows Phone 7 buíld? Not if you want to create a really well designed app.</p>

<p>The problem with Windows Phone 8 from a designers point of view is that it introduces two new display resolutions. Windows Phone 7 supports just one resolution, WVGA of 800x480px. Windows Phone 8 adds WXGA (1280&#215;768) and 720p (1280&#215;720). If you run your Windows Phone 7 app on a WXGA device, the app is proportionally scaled by a factor of 1.6 to fill out the whole screen. As long as you provide all your images scaled by the same factor, the app looks ok.</p>

<p>The problem is 720p, because it is a different aspect ratio (16:9 vs 15:9). Your Windows Phone 7 app running on a 720p app is first scaled by a factor of 1.5 to 1200&#215;720 and the rest of the display (80px) is padded on top or bottom, depending on the VerticalAlignment. By default, the padding is added to the top of your app making your header 80px higher:</p>

<p><img src="/images/wp7header.png" alt="" class="pure-img" ></p>

<p>This makes all the Windows Phone 7 apps look bad on a 720p devices like the HTC 8X I currently use. If you create a Windows Phone 8 project with exactly the same XAML, the app will look ok on a 720p device, no padding added to top or bottom. Another advantage of a special Windows Phone 8 build is that the app will start much faster.</p>

<p>To sum it up, if you want your app to look great on all devices, always create a separate Windows Phone 8 build. It is usually as simple as creating a new Windows Phone 8 project and adding all the existing files as links. You can find more info about this technique on <a href="http://www.developer.nokia.com/Community/Wiki/Maintaining_a_WP7_and_WP8_version_of_a_same_Silverlight_application">Nokia Dev Wiki</a>.</p>

                    </div>
                </section>
                
                <h1 class="content-subhead">27 Mar 2013, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="https://github.com:1313/igorkulman/coding-journal/displaying-pdf-files-in-windows-store-apps/" class="post-title">Displaying PDF files in Windows Store apps</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">Igor Kulman</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-WinRT" href="https://github.com:1313/igorkulman/coding-journal//categories/winrt">WinRT</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>Displaying PDF files in a mobile apps is a valid use case and there are many iOS and Android app that do it. WinRT has no APIs for displaying PDF files. The only thing you can do with a PDF in WinRT is to display it in the default PDF viewer app using the Windows.System.Launcher.LaunchFileAsync method. This is typicaly not what you want to do. This method takes the user out of your app and more importantly the PDF can be copied, shared, etc.</p>

<p>There are a few 3rd party components for displaying PDF files in Windows Store apps, each has some problems and restrictions.</p>

<p><strong>ComponentOne PDFViewer</strong></p>

<p><a href="http://www.componentone.com">ComponentOne</a> has a <a href="http://www.componentone.com/SuperProducts/PdfViewerWinRT/">PDFViewer component</a> as part of their <a href="http://www.componentone.com/SuperProducts/StudioWinRTXAML/">Studio for WinRT XAML</a> package. This package costs $895. There are <a href="http://helpcentral.componentone.com/nethelp/PdfViewerWinRT/#!Documents/pdfviewerlimitations1.htm">many limitations</a> when using this component that you need to be aware of. If you want to have more control over the rendered PDF files, you can get all the pages as FrameworkElements and do not need to use the PDFViewer as one monolitic component. It does not support all the fonts and complex documents are rendered really messed up, it was not usable for me at all.</p>

<p><strong>Foxit Embedded PDF SDK</strong></p>

<p>Foxit has a <a href="http://www.foxitsoftware.com/products/sdk/embedded/winrt/">Embedded PDF SDK for Windows RT</a> and <a href="http://www.foxitsoftware.com/products/sdk/embedded/win8/">Embedded PDF SDK for Windows Store Apps</a> (what is the difference?). If you want to try it, you have to fill in a registration form. There is no information about pricing and you need to fill in another form to ask for a quotation. You can get the pages of the PDF files as images if you want more control, but the component only works with StorageFiles. It cannot open a custom stream (e.g: file in isolated storage with custom encryption).</p>

<p><strong>TallComponents PDFRasterizer</strong></p>

<p>TallComponents has a PDFRasterizer component that is currently in beta. You need to <a href="https://www.tallcomponents.com/betaprogram.aspx">join the beta program</a> to get access. The final version should be out in 6-8 weeks. PDFRasterizer costs 1490€ for a single app. It is just a rasterizer, you can get the pages of the PDF files as images and that is all. It works well with differents fonts and complex documents.</p>

<p><strong>PDFTron Mobile PDF SDK</strong></p>

<p><a href="http://www.pdftron.com/index.html">PDFTron</a> has a <a href="http://www.pdftron.com/pdfnet/mobile/windows8_winrt_pdf_library.html">Mobile PDF SDK</a> that works with Windows Store apps. To get a trial version you have to fill in a form where you have to describe your app. The pricing is not clear, it dependes on many factors and you need to write them an email to get a price. You can get pages from the PDF file but not in a usable format like an image.</p>

<p>So which PDF solution should you use? That dependes on your needs. I am afraid you will have to check each of them out by yourself and assess it according to your needs.</p>

                    </div>
                </section>
                
            </div>
            
<div class="pagination">
  <nav role="pagination" class="post-list-pagination">
      
      <a href="/page/5/" class="post-list-pagination-item pure-button post-list-pagination-item-prev">
        <i class="fa fa-angle-double-left"></i>&nbsp;Newer
      </a>
      
    <span class="post-list-pagination-item post-list-pagination-item-current">Page 6 of 10</span>
    
      <a href="/page/7/" class="post-list-pagination-item pure-button post-list-pagination-item-next">
        Older&nbsp;<i class="fa fa-angle-double-right"></i>
      </a>
    
  </nav>
</div>


            <div class="footer">
    <div class="pure-menu pure-menu-horizontal pure-menu-open">
        <ul>
            <li>Powered by <a class="hugo" href="http://hugo.spf13.com/" target="_blank">hugo</a></li>
        </ul>
    </div>
</div>
<script src="https://github.com:1313/igorkulman/coding-journal//js/all.min.js"></script>
        </div>
    </div>
</div>


<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-49528577-2', 'auto');
ga('send', 'pageview');

</script>

<script data-no-instant>document.write('<script src="http://'
        + (location.host || 'localhost').split(':')[0]
		+ ':1313/livereload.js?mindelay=10"></'
        + 'script>')</script></body>
</html>
