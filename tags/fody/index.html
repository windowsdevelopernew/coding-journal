<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fody &middot; Coding Journal</title>

    <meta name="description" content="Adventures in the world of C#, F# and WinRT">

    <meta name="generator" content="Hugo 0.14" />
    <meta name="twitter:card" content="summary">
    
    <meta name="twitter:title" content="Fody &middot; Coding Journal">
    <meta name="twitter:description" content="Adventures in the world of C#, F# and WinRT">

    <meta property="og:type" content="article">
    <meta property="og:title" content="Fody &middot; Coding Journal">
    <meta property="og:description" content="Adventures in the world of C#, F# and WinRT">

    <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700|Oxygen:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/pure-min.css">
    <!--[if lte IE 8]>
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-old-ie-min.css">
    <![endif]-->
    <!--[if gt IE 8]><!-->
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-min.css">
    <!--<![endif]-->

    <link rel="stylesheet" href="http://blog.kulman.sk/css/all.min.css">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">

    <link rel="alternate" type="application/rss+xml" title="Coding Journal" href="http://blog.kulman.sk/index.xml" />
</head>
<body>


<div id="layout" class="pure-g">
    <div class="sidebar pure-u-1 pure-u-md-1-4">
    <div class="header">
        <hgroup>
            <h1 class="brand-title"><a href="http://blog.kulman.sk">Coding Journal</a></h1>
            <h2 class="brand-tagline"> Adventures in the world of C#, F# and WinRT </h2>
        </hgroup>

        <nav class="nav">
            <ul class="nav-list">
                
                <li class="nav-item">
                    <a class="pure-button" href="https://twitter.com/igorkulman"><i class="fa fa-twitter"></i> Twitter</a>
                </li>
                
                
                <li class="nav-item">
                    <a class="pure-button" href="https://github.com/igorkulman "><i class="fa fa-github-alt"></i> github</a>
                </li>
                
                <li class="nav-item">
                    <a class="pure-button" href="http://blog.kulman.sk/index.xml"><i class="fa fa-rss"></i> rss</a>
                </li>
            </ul>
        </nav>

<div>
<h2>About me</h2>

<p>Igor Kulman is currently working as Windows Phone developer, also building applications for Microsoft Azure and playing with F#.</p>
<p>
Interested in programming languages, functional programming and data science.</p>

</div>

    </div>
</div>


    <div class="content pure-u-1 pure-u-md-3-4">
        <div>
            
            <div class="posts">
                
                <h1 class="content-subhead">14 Mar 2014, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://blog.kulman.sk/pock8-beautiful-pocket-client-for-windows-phone/" class="post-title">Pock8: beautiful Pocket client for Windows Phone</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">Igor Kulman</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-Windows Phone" href="http://blog.kulman.sk/categories/windows-phone">Windows Phone</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>Recently I have released a new Windows Phone app called <a href="http://t.co/YMtrM84rwI">Pock8</a>. Pock8 is a beautiful Pocket (formerly Read It Later) client for Windows Phone. The design of the app was created by Jan Marek who worked with my on the <a href="http://windowsphone.com/s?appid=b2667b3c-9272-4416-b0be-c8adadc651e4">Shopping List Simple</a> app.</p>

<p><img src="/images/pocket.png" alt="" class="pure-img" ></p>

<p>Our goal was to create a Pocket client that would be really easy to use and that would have a nice and simple design. I think we have achieved our goal. The main features of the app are</p>

<ul>
<li>clean and simple design</li>
<li>optimized article view for comfortable reading</li>
<li>article cache for offline reading</li>
<li>dark theme for OLED screens or reading in the dark</li>
<li>support for receiving articles from other apps like WPCentral</li>
<li>listening to articles aloud</li>
<li>sharing articles</li>
</ul>

<p>In version 1.2 we really concentrated on user feedback and added many features that our users requested. We love and users and want to make them happy.</p>

<p>The app is free to use with one limitation, all the list display just 5 articles at any time. You can use an in-app purchase to get rid of the limitation and support further development of the app.</p>

<p>For more info about <a href="http://t.co/YMtrM84rwI">Pock8</a>, follow the app on Twitter at <a href="https://twitter.com/pock8app">@pock8app</a>.</p>

<p><img src="http://qrcode.kaywa.com/img.php?s=6&#038;d=http%3A%2F%2Fwindowsphone.com%2Fs%3Fappid%3Dc00715a7-d2d4-48c1-94e2-2ecc7c1b798b" alt="Pock8" style="max-width:100px" /></p>

                    </div>
                </section>
                
                <h1 class="content-subhead">18 Sep 2013, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://blog.kulman.sk/developing-windows-store-apps-with-caliburn-micro-part-4-services-and-dependency-injection/" class="post-title">Developing Windows Store apps with Caliburn Micro Part 4: services and dependency injection</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">Igor Kulman</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-WinRT" href="http://blog.kulman.sk/categories/winrt">WinRT</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>In this installment of the series I will show you how user data services. We will finally use the Unity DI container that is part of the project setup.</p>

<p><strong>Data and Services</strong></p>

<p>In next installment we will be showing a list of products, so let&#8217;s create a simple Product class first in the Data directory:</p>

<p><script src="https://gist.github.com/6606102.js"></script></p>

<p>PropertyChangedBase is a base class implementing the INotifyPropertyChanged interface and the ImplementPropertyChanged attribute makes sure it&#8217;s method is called for all the property changes. (More about Fody <a href="http://blog.kulman.sk/inotifypropertychanged-the-easy-way-in-windows-phone-and-windows-8/" title="INotifyPropertyChanged the easy way in Windows Phone and Windows 8">here</a>)</p>

<p>All the operations will be handled by a service implementing the IProductService interface:</p>

<p><script src="https://gist.github.com/6606127.js"></script></p>

<p>You can implement this interface any way you want. To keep things simple I chose an implementation with two hardcoded products:</p>

<p><script src="https://gist.github.com/6606170.js"></script></p>

<p><strong>Registering services</strong></p>

<p>All our services need to be registered with the Unity DI container before being used. The place to do it is the App class (App.xaml.cs file). You can override the Configure method to do it:</p>

<p><script src="https://gist.github.com/6607482.js"></script></p>

<p>This registers the ProductService class to the IProductService interface. The new ContainerControlledLifetimeManager() parameter is Unity&#8217;s way of setting the registration to be a singleton.</p>

<p><strong>Injecting services into ViewModel</strong></p>

<p>Injecting the ProductService into our MainViewModel is very simple. Just declare a IProductService variable and initialize it from constructor. Unity will take care of the rest:</p>

<p><script src="https://gist.github.com/6607538.js"></script></p>

<p>Next time we will implement a typical master-detail scenario showing products usign the ProductService whe have created. All the code is again <a href="https://github.com/igorkulman/CaliburnDemoWinRT">available at GitHub</a>.</p>

                    </div>
                </section>
                
                <h1 class="content-subhead">30 Jul 2013, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://blog.kulman.sk/developing-windows-store-apps-with-caliburn-micro-part-1-setup-and-first-view/" class="post-title">Developing Windows Store apps with Caliburn Micro Part 1: setup and first view</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">Igor Kulman</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-WinRT" href="http://blog.kulman.sk/categories/winrt">WinRT</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>I have been developing Windows Store apps for some time. I have always used MVVM, but mostly &#8220;my own&#8221; MVVM. I have finally decided to use a &#8220;real&#8221; MVVM framework and I have chosen Caliburn Micro, because I did not like MVVM very much. In this article I am going to show you how to use Caliburn Micro, Unity and Fody to develop Windows Store apps.</p>

<p><strong>Caliburn Micro</strong></p>

<p><a href="https://caliburnmicro.codeplex.com/">Caliburn Micro</a> is a small, yet powerful framework, designed for building applications across all Xaml Platforms. With strong support for MVVM and other proven UI patterns, Caliburn.Micro will enable you to build your solution quickly, without the need to sacrifice code quality or testability.</p>

<p><strong>Unity</strong></p>

<p>When I started with Calibun Micro I discovered an <a href="http://nybbles.blogspot.cz/2013/02/winrt-caliburnmicro-and-ioc-part-3.html">article by Thomas Baker about using Unity as DI container with Caliburn Micro</a>. His article also contains code that makes it easy for you to save and load state when the app gets suspended. With his permission, I have <a href="https://nuget.org/packages/Caliburn.Micro.Unity.WinRT/">created a Nuget package</a> from his code, this article is going to use this package.</p>

<p><strong>Fody</strong></p>

<p>I have been using <a href="https://github.com/Fody/Fody">Fody</a> with Windows Phone and Windows Store apps for some time now. I especially use the <a href="https://github.com/Fody/PropertyChanged">INotifyPropertyChanged weaver</a> I <a href="http://blog.kulman.sk/inotifypropertychanged-the-easy-way-in-windows-phone-and-windows-8/" title="INotifyPropertyChanged the easy way in Windows Phone and Windows 8">wrote about earlier</a>. Check the article for more information if you are not already familliar with Fody.</p>

<p><strong>Application setup</strong></p>

<p>Let&#8217;s start buidling a simple demo application. This demo application will show you how little code you need to write to get something done when using the mentioned libraries.</p>

<p>Create a Blank App. Add the <a href="http://www.nuget.org/packages/Caliburn.Micro.Unity.WinRT/">Caliburn.Micro.Unity.WinRT</a> package from Nuget. It will install all the dependencies you need. Install <a href="http://www.nuget.org/packages/PropertyChanged.Fody/">PropertyChanged.Fody</a> from Nuget. Next you need to hook up PropertyChanged.Fody with Fody. Open FodyWeavers.xml and change it to</p>

<p><script src="https://gist.github.com/6088620.js"></script></p>

<p>PropertyChanged.Fody now knows that it should call the NotifyOfPropertyChange method from Caliburn Micro when a property gets changed. Let&#8217;s do some cleanup next. Delete MainPage.xaml, rename the Common folder to Resources and create a few additional folders:</p>

<ul>
<li>Views</li>
<li>ViewModels</li>
<li>Data</li>
<li>Converters</li>
<li>Services</li>
<li>Code</li>
</ul>

<p>Next make you app inherit from CaliburnUnityApplication by changing App.xaml to</p>

<p><script src="https://gist.github.com/6088861.js"></script></p>

<p>and cleaning up and changing App.xaml.cs to</p>

<p><script src="https://gist.github.com/6088871.js"></script></p>

<p><strong>First ViewModel</strong></p>

<p>Now you can create your first ViewModel and your first View. Caliburn Micro uses a naming convention to pair a ViewModel and a View. Create a new class called MainViewModel in the ViewModels folder. Make the class inherit from ViewModelBase and implement the default constructor:</p>

<p>create a new string property called Title. Add the ImplementPropertyChanged attribute to the class. This makes NotifyPropertyChanged.Fody call the NotifyOfPropertyChange whenever any of the properties (just Title for now) changes. Assing some text to the Title property in the constructor:</p>

<p><script src="https://gist.github.com/6088988.js"></script></p>

<p><strong>First View</strong></p>

<p>Now create a view for the MainViewModel as a Blank Page. According to the naming conventions, it needs to be called MainView and created in the Views folder. Add a TextBlock to the View. To bind the text of this TextBlock to the Title property, you could use Text=&#8221;{Binding Title}&#8221;. This works just fine but you do not have to do it. Just name the TextBlock the same as the property you want it to bind to (in our case Title):</p>

<p><script src="https://gist.github.com/6089012.js"></script></p>

<p><strong>Navigating to the view</strong></p>

<p>There is only one more thing left to do. You need to tell the framework to navigate to the MainView when the app starts. This is done in the OnLaunched method in App.xaml.cs</p>

<p><script src="https://gist.github.com/6089032.js"></script></p>

<p><strong>Run you app</strong></p>

<p>Hit F5 and you will see your app start, navigate to MainView and show the text from the Title property in this view.</p>

<p>You can find the <a href="https://github.com/igorkulman/CaliburnDemoWinRT">code on Github</a> and stay tuned for Part 2!</p>

                    </div>
                </section>
                
                <h1 class="content-subhead">06 Jun 2013, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://blog.kulman.sk/inotifypropertychanged-the-easy-way-in-windows-phone-and-windows-8/" class="post-title">INotifyPropertyChanged the easy way in Windows Phone and Windows 8</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">Igor Kulman</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-Windows Phone" href="http://blog.kulman.sk/categories/windows-phone">Windows Phone</a><a class="post-category post-category-WinRT" href="http://blog.kulman.sk/categories/winrt">WinRT</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>If you develop Windows Phone, Windows 8, Silverlight or WPF apps using the MVVM pattern, you are familiar with the INotifyPropertyChanged interface.</p>

<p><strong>Typical implementation</strong></p>

<p>In a typical implementation, you usually have a base class implementing the interface, like</p>

<p><script src="https://gist.github.com/5849361.js"></script></p>

<p>or use a framework like MVVMLight, Prism or Caliburn Micro that provides such base class for you. In your view models you have properties using the PropertyChanged method</p>

<p><script src="https://gist.github.com/5849364.js"></script></p>

<p>You do not need to create such properties by hand, you can <a href="http://www.kulman.sk/data/down/propn.snippet">use a snippet</a>, but it is still a lot of code to do such a simple thing.</p>

<p><strong>Meet Fody</strong></p>

<p><a href="https://github.com/Fody/Fody">Fody</a> is an assembly weaver for .NET that plugs to the build process of your project and modifies the IL of your assemblies according to your needs. It supports .net 3.5, .net 4, .net 4.5, Silverlight 4, Silverlight 5, Windows Phone 7, Windows Phone 8, Metro on Windows 8, Mono, MonoTouch, MonoDroid and PCL. No installation or configuration is required, you just need to install the <a href="http://nuget.org/packages/Fody/">Fody Nuget package</a>.</p>

<p><strong>INotifyPropertyChanged using Fody (80% of the time)</strong></p>

<p>Fody has a <a href="https://github.com/Fody/PropertyChanged">PropertyChanged addin</a> that does all the INotifyPropertyChanged plumbing for you. If you want the same behavior as in my typical implementation example, there is no need for a base class. Install the <a href="https://github.com/Fody/PropertyChanged">PropertyChanged.Fody Nuget package</a>, decorate your view model class with the ImplementPropertyChanged attribute and use just basic properties</p>

<p><script src="https://gist.github.com/5849367.js"></script></p>

<p>That is it. Less code, the same behaviour. You can verify it with tools like <a href="http://www.telerik.com/justdecompile.aspx">Telerik JustDecompile</a>.</p>

<p><strong>The remaining 20%</strong></p>

<p>Fody does all the plumbing for you. It even knows that the FullName property uses FirstName and Surname and raises the PropertyChanged event for it when any og the two properties changes. The PropertyChanged.Fody addin <a href="https://github.com/Fody/PropertyChanged/wiki/Attributes">contains attributes</a>, that you can use to define dependencies</p>

<p><script src="https://gist.github.com/5849371.js"></script></p>

<p>or to raise the PropertyChanged event for any other property</p>

<p><script src="https://gist.github.com/5849373.js"></script></p>

<p>Sometimes you want to execute some additional code in the setter. Fody allows it, just create a method with the <a href="https://github.com/Fody/PropertyChanged/wiki/On_PropertyName_Changed">name On_PropertyName_Changed</a></p>

<p><script src="https://gist.github.com/5849376.js"></script></p>

<p>If you use a framework and you want to raise the PropertyChanged event through a method of this framework, it is not a problem. You just need to <a href="https://github.com/Fody/PropertyChanged/wiki/Options">set the EventInvokerNames options</a>. The Fody <a href="https://github.com/Fody/PropertyChanged/wiki/SupportedToolkits">documentation even describes what to set for some of the frameworks</a> so you do not have to figure it out for yourself.</p>

                    </div>
                </section>
                
            </div>
            

            <div class="footer">
    <div class="pure-menu pure-menu-horizontal pure-menu-open">
        <ul>
            <li>Powered by <a class="hugo" href="http://hugo.spf13.com/" target="_blank">hugo</a></li>
        </ul>
    </div>
</div>
<script src="http://blog.kulman.sk/js/all.min.js"></script>
        </div>
    </div>
</div>

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-49528577-2', 'auto');
ga('send', 'pageview');

</script>

</body>
</html>
