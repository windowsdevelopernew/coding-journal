<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="msvalidate.01" content="5B57D04D465AB9C871A8DD4414956DB4" />
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Developing Windows Store apps with Caliburn Micro Part 4: services and dependency injection &middot; Coding Journal</title>

    <meta name="description" content="">

    <meta name="generator" content="Hugo 0.15" />
    <meta name="twitter:card" content="summary">
    
    <meta name="twitter:title" content="Developing Windows Store apps with Caliburn Micro Part 4: services and dependency injection &middot; Coding Journal">
    <meta name="twitter:description" content="">

    <meta property="og:type" content="article">
    <meta property="og:title" content="Developing Windows Store apps with Caliburn Micro Part 4: services and dependency injection &middot; Coding Journal">
    <meta property="og:description" content="">

    <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700|Oxygen:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/pure-min.css">
    <!--[if lte IE 8]>
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-old-ie-min.css">
    <![endif]-->
    <!--[if gt IE 8]><!-->
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-min.css">
    <!--<![endif]-->

    <link rel="stylesheet" href="https://blog.kulman.sk/css/all.min.css">    
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://blog.kulman.sk/css/custom.css">

    <link rel="alternate" type="application/rss+xml" title="Coding Journal" href="https://blog.kulman.sk/index.xml" />
</head>
<body>


<div id="layout" class="pure-g">
    <div class="sidebar pure-u-1 pure-u-md-1-4">
    <div class="header">
        <hgroup>
            <h1 class="brand-title"><a href="https://blog.kulman.sk">Coding Journal</a></h1>
            <h2 class="brand-tagline"> Adventures in the world of C#, F# and WinRT </h2>
        </hgroup>

        <nav class="nav wide-only">
            <ul class="nav-list">
                
                <li class="nav-item">
                    <a class="pure-button" href="https://twitter.com/igorkulman"><i class="fa fa-twitter"></i> Twitter</a>
                </li>
                
                
                <li class="nav-item">
                    <a class="pure-button" href="https://github.com/igorkulman "><i class="fa fa-github-alt"></i> github</a>
                </li>
                
                <li class="nav-item">
                    <a class="pure-button" href="https://blog.kulman.sk/index.xml"><i class="fa fa-rss"></i> rss</a>
                </li>
            </ul>
        </nav>


<ul class="menu">
   <li class="menu-item"><a href="/">Blog</a></li>
    <li class="menu-item"><a href="/projects">Projects</a></li>
    <li class="menu-item"><a href="/about">About</a></li>
</ul>


    </div>
</div>


    <div class="content pure-u-1 pure-u-md-3-4">
        <div>
            
            <div class="posts">
                <h1 class="content-subhead">18 Sep 2013</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="https://blog.kulman.sk/developing-windows-store-apps-with-caliburn-micro-part-4-services-and-dependency-injection/" class="post-title">Developing Windows Store apps with Caliburn Micro Part 4: services and dependency injection</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">Igor Kulman</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-WinRT" href="https://blog.kulman.sk/categories/winrt">WinRT</a>
                            
                        </p>
                    </header>

                  
                    <div class="post-description">
                        <p>In this installment of the series I will show you how user data services. We will finally use the Unity DI container that is part of the project setup.</p>

<p><strong>Data and Services</strong></p>

<p>In next installment we will be showing a list of products, so let&#8217;s create a simple Product class first in the Data directory:</p>

<script src="https://gist.github.com/6606102.js"></script>

<p>PropertyChangedBase is a base class implementing the INotifyPropertyChanged interface and the ImplementPropertyChanged attribute makes sure it&#8217;s method is called for all the property changes. (More about Fody <a href="http://blog.kulman.sk/inotifypropertychanged-the-easy-way-in-windows-phone-and-windows-8/" title="INotifyPropertyChanged the easy way in Windows Phone and Windows 8">here</a>)</p>

<p>All the operations will be handled by a service implementing the IProductService interface:</p>

<script src="https://gist.github.com/6606127.js"></script>

<p>You can implement this interface any way you want. To keep things simple I chose an implementation with two hardcoded products:</p>

<script src="https://gist.github.com/6606170.js"></script>

<p><strong>Registering services</strong></p>

<p>All our services need to be registered with the Unity DI container before being used. The place to do it is the App class (App.xaml.cs file). You can override the Configure method to do it:</p>

<script src="https://gist.github.com/6607482.js"></script>

<p>This registers the ProductService class to the IProductService interface. The new ContainerControlledLifetimeManager() parameter is Unity&#8217;s way of setting the registration to be a singleton.</p>

<p><strong>Injecting services into ViewModel</strong></p>

<p>Injecting the ProductService into our MainViewModel is very simple. Just declare a IProductService variable and initialize it from constructor. Unity will take care of the rest:</p>

<script src="https://gist.github.com/6607538.js"></script>

<p>Next time we will implement a typical master-detail scenario showing products usign the ProductService whe have created. All the code is again <a href="https://github.com/igorkulman/CaliburnDemoWinRT">available at GitHub</a>.</p>

                    </div>

                     <div class="pure-g" style="margin-bottom:1em">
  <div class="pure-u-1-2">
     <a class="pure-button  pure-button-primary" style="margin-top:12px" href="https://github.com/igorkulman/coding-journal/edit/master/content/post/2013-09-18-developing-windows-store-apps-with-caliburn-micro-part-4-services-and-dependency-injection.md" title="Help improve article post\2013-09-18-developing-windows-store-apps-with-caliburn-micro-part-4-services-and-dependency-injection.md">Edit</a>
   </div>
   <div class="pure-u-1-2">
   <p style="text-align:right">This content is open source. 
   Please <a href="https://github.com/igorkulman/coding-journal/edit/master/content/post/2013-09-18-developing-windows-store-apps-with-caliburn-micro-part-4-services-and-dependency-injection.md" title="Help improve article post\2013-09-18-developing-windows-store-apps-with-caliburn-micro-part-4-services-and-dependency-injection.md">help improve it</a>.</p>
  </div>
</div>

                    <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'coudingjournal';
    var disqus_identifier = 'https:\/\/blog.kulman.sk\/developing-windows-store-apps-with-caliburn-micro-part-4-services-and-dependency-injection\/';
    var disqus_title = 'Developing Windows Store apps with Caliburn Micro Part 4: services and dependency injection';
    var disqus_url = 'https:\/\/blog.kulman.sk\/developing-windows-store-apps-with-caliburn-micro-part-4-services-and-dependency-injection\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

                    
                </section>


            </div>
            <div class="footer">
    <div class="pure-menu pure-menu-horizontal pure-menu-open">
        <ul>
            <li>Powered by <a class="hugo" href="http://hugo.spf13.com/" target="_blank">hugo</a></li>
        </ul>
    </div>
</div>
<script src="https://blog.kulman.sk/js/all.min.js"></script>
        </div>
    </div>
</div>


<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-49528577-2', 'auto');
ga('send', 'pageview');

</script>

</body>
</html>
